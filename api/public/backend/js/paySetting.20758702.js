"use strict";(self["webpackChunkscui"]=self["webpackChunkscui"]||[]).push([[3342],{2948:function(e,a,l){l.r(a),l.d(a,{default:function(){return h}});var t=l(6252);const m=(0,t.Uk)("保存"),i=(0,t.Uk)("开启"),p=(0,t.Uk)("关闭"),o=(0,t.Uk)("点击上传"),d=(0,t.Uk)("点击上传"),u=(0,t.Uk)("保存"),s=(0,t.Uk)("开启"),_=(0,t.Uk)("关闭"),r=(0,t.Uk)("保存");function w(e,a,l,w,c,n){const f=(0,t.up)("el-input"),y=(0,t.up)("el-form-item"),h=(0,t.up)("el-button"),x=(0,t.up)("el-form"),W=(0,t.up)("el-tab-pane"),b=(0,t.up)("el-radio"),V=(0,t.up)("el-upload"),k=(0,t.up)("el-tabs"),g=(0,t.up)("el-card"),U=(0,t.up)("el-main");return(0,t.wg)(),(0,t.j4)(U,null,{default:(0,t.w5)((()=>[(0,t.Wm)(g,{shadow:"never"},{default:(0,t.w5)((()=>[(0,t.Wm)(k,{modelValue:c.activeName,"onUpdate:modelValue":a[10]||(a[10]=e=>c.activeName=e)},{default:(0,t.w5)((()=>[(0,t.Wm)(W,{label:"API地址",name:"first"},{default:(0,t.w5)((()=>[(0,t.Wm)(x,{ref:"form",model:c.apiform,"label-width":"120px"},{default:(0,t.w5)((()=>[(0,t.Wm)(y,{label:"API地址",style:{width:"700px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{modelValue:c.apiform.api_url,"onUpdate:modelValue":a[0]||(a[0]=e=>c.apiform.api_url=e)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(y,{style:{"margin-top":"50px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{type:"primary",onClick:n.apiSubmit,style:{width:"200px"}},{default:(0,t.w5)((()=>[m])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])])),_:1}),(0,t.Wm)(W,{label:"微信支付",name:"second"},{default:(0,t.w5)((()=>[(0,t.Wm)(x,{ref:"form",model:c.wxform,"label-width":"120px"},{default:(0,t.w5)((()=>[(0,t.Wm)(y,{label:"是否开启"},{default:(0,t.w5)((()=>[(0,t.Wm)(b,{label:"1",modelValue:c.wxform.wechat_pay_open,"onUpdate:modelValue":a[1]||(a[1]=e=>c.wxform.wechat_pay_open=e)},{default:(0,t.w5)((()=>[i])),_:1},8,["modelValue"]),(0,t.Wm)(b,{label:"0",modelValue:c.wxform.wechat_pay_open,"onUpdate:modelValue":a[2]||(a[2]=e=>c.wxform.wechat_pay_open=e)},{default:(0,t.w5)((()=>[p])),_:1},8,["modelValue"])])),_:1}),(0,t.Wm)(y,{label:"小程序appId",style:{width:"700px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{modelValue:c.wxform.wechat_miniapp_id,"onUpdate:modelValue":a[3]||(a[3]=e=>c.wxform.wechat_miniapp_id=e)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(y,{label:"商户ID(Mchid)",style:{width:"700px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{modelValue:c.wxform.wechat_pay_mchid,"onUpdate:modelValue":a[4]||(a[4]=e=>c.wxform.wechat_pay_mchid=e)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(y,{label:"密钥(Key)",style:{width:"700px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{modelValue:c.wxform.wechat_pay_key,"onUpdate:modelValue":a[5]||(a[5]=e=>c.wxform.wechat_pay_key=e)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(y,{label:"支付证书",style:{width:"700px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(V,{action:c.uploadUrl,limit:1,"on-success":n.handleOnSuccessCert,"file-list":c.wechat_pay_cert},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{size:"small",type:"primary"},{default:(0,t.w5)((()=>[o])),_:1})])),_:1},8,["action","on-success","file-list"])])),_:1}),(0,t.Wm)(y,{label:"支付证书秘钥",style:{width:"700px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(V,{action:c.uploadUrl,limit:1,"on-success":n.handleOnSuccessPem,"file-list":c.wechat_pay_pem},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{size:"small",type:"primary"},{default:(0,t.w5)((()=>[d])),_:1})])),_:1},8,["action","on-success","file-list"])])),_:1}),(0,t.Wm)(y,{style:{"margin-top":"50px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{type:"primary",onClick:n.wxSubmit,style:{width:"200px"}},{default:(0,t.w5)((()=>[u])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])])),_:1}),(0,t.Wm)(W,{label:"支付宝支付",name:"third"},{default:(0,t.w5)((()=>[(0,t.Wm)(x,{ref:"form",model:c.aliform,"label-width":"120px"},{default:(0,t.w5)((()=>[(0,t.Wm)(y,{label:"是否开启"},{default:(0,t.w5)((()=>[(0,t.Wm)(b,{label:"1",modelValue:c.aliform.alipay_open,"onUpdate:modelValue":a[6]||(a[6]=e=>c.aliform.alipay_open=e)},{default:(0,t.w5)((()=>[s])),_:1},8,["modelValue"]),(0,t.Wm)(b,{label:"0",modelValue:c.aliform.alipay_open,"onUpdate:modelValue":a[7]||(a[7]=e=>c.aliform.alipay_open=e)},{default:(0,t.w5)((()=>[_])),_:1},8,["modelValue"])])),_:1}),(0,t.Wm)(y,{label:"支付宝应用私钥",style:{width:"700px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{modelValue:c.aliform.alipay_private_key,"onUpdate:modelValue":a[8]||(a[8]=e=>c.aliform.alipay_private_key=e),type:"textarea",rows:9},null,8,["modelValue"])])),_:1}),(0,t.Wm)(y,{label:"支付宝应用公钥",style:{width:"700px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{modelValue:c.aliform.alipay_public_key,"onUpdate:modelValue":a[9]||(a[9]=e=>c.aliform.alipay_public_key=e),type:"textarea",rows:8},null,8,["modelValue"])])),_:1}),(0,t.Wm)(y,{style:{"margin-top":"50px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{type:"primary",onClick:n.aliSubmit,style:{width:"200px"}},{default:(0,t.w5)((()=>[r])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1})}var c=l(2509),n={name:"paySettingIndex",data(){return{uploadUrl:c.Z.API_URL+"/paySetting/uploadTxtFile",labelPosition:"left",activeName:"first",wechat_pay_cert:[],wechat_pay_pem:[],apiform:{api_url:""},wxform:{wechat_pay_open:"",wechat_miniapp_id:"",wechat_pay_mchid:"",wechat_pay_key:"",wechat_pay_cert:"",wechat_pay_pem:""},aliform:{alipay_open:"",alipay_private_key:"",alipay_public_key:""}}},mounted(){this.getBaseConf()},methods:{handleOnSuccessCert(e){0==e.code&&(this.wxform.wechat_pay_cert=e.data.url)},handleOnSuccessPem(e){0==e.code&&(this.wxform.wechat_pay_pem=e.data.url)},async getBaseConf(){let e=await this.$API.paySetting.payConfig.get();this.wxform=e.data.wechat_pay,this.aliform=e.data.alipay,this.apiform=e.data.api_url,this.wechat_pay_cert=[{name:e.data.wechat_pay.wechat_pay_cert,url:e.data.wechat_pay.wechat_pay_cert}],this.wechat_pay_pem=[{name:e.data.wechat_pay.wechat_pay_pem,url:e.data.wechat_pay.wechat_pay_pem}]},async apiSubmit(){let e=await this.$API.paySetting.save.post(this.apiform);0==e.code?this.$message.success(e.msg):this.$message.error(e.msg)},async wxSubmit(){let e=await this.$API.paySetting.save.post(this.wxform);0==e.code?this.$message.success(e.msg):this.$message.error(e.msg)},async aliSubmit(){let e=await this.$API.paySetting.save.post(this.aliform);0==e.code?this.$message.success(e.msg):this.$message.error(e.msg)}}},f=l(3744);const y=(0,f.Z)(n,[["render",w]]);var h=y}}]);