"use strict";(self["webpackChunkscui"]=self["webpackChunkscui"]||[]).push([[6325],{1686:function(e,l,t){t.d(l,{Z:function(){return G}});var a=t(6252),o=t(3577);const i=e=>((0,a.dD)("data-v-a595b130"),e=e(),(0,a.Cn)(),e),s={style:{padding:"20px"}},d=i((()=>(0,a._)("span",{class:"cate-title"},"全部资源",-1))),r={class:"el-dropdown-link"},m=(0,a.Uk)("添加分类"),n={id:"cate-tree"},u=["onClick"],c={class:"el-dropdown-link"},p=(0,a.Uk)("添加分类"),h=(0,a.Uk)("编辑分类"),f=(0,a.Uk)("删除分类"),g=["onClick"],w={class:"el-dropdown-link"},b=(0,a.Uk)("编辑分类"),_=(0,a.Uk)("删除分类"),y={style:{width:"400px"}},v=(0,a.Uk)("使用资源"),V=(0,a.Uk)("上传图片"),k=(0,a.Uk)("上传视频"),W=(0,a.Uk)("删除文件"),x={key:0,class:"img-box",style:{"margin-right":"20px"}},U=(0,a.Uk)("上传中"),C=["onClick"],I={key:1,width:"100",height:"100",controls:""},$=["src","type"],S=(0,a.Uk)(" 您的浏览器不支持 video 标签。 "),D={key:2,class:"user-selected"},F={class:"image-name"},q={class:"dialog-footer"},P=(0,a.Uk)("取消"),z=(0,a.Uk)("确定");function A(e,l,t,i,A,j){const L=(0,a.up)("el-icon"),M=(0,a.up)("el-dropdown-item"),N=(0,a.up)("el-dropdown-menu"),T=(0,a.up)("el-dropdown"),G=(0,a.up)("el-aside"),Z=(0,a.up)("el-button"),R=(0,a.up)("el-badge"),O=(0,a.up)("el-upload"),E=(0,a.up)("el-header"),H=(0,a.up)("el-progress"),B=(0,a.up)("el-image"),Y=(0,a.up)("el-pagination"),K=(0,a.up)("el-main"),J=(0,a.up)("el-container"),Q=(0,a.up)("el-input"),X=(0,a.up)("el-form-item"),ee=(0,a.up)("el-form"),le=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(J,{style:{height:"100%"}},{default:(0,a.w5)((()=>[(0,a.Wm)(G,{width:t.needSelect?"300px":"400px",style:{height:"100%"}},{default:(0,a.w5)((()=>[(0,a._)("ul",s,[(0,a._)("li",null,[(0,a._)("div",{class:"tree-item",onClick:l[1]||(l[1]=e=>j.itemData(0))},[d,(0,a.Wm)(T,{onCommand:l[0]||(l[0]=e=>j.handleCommand(e,{id:0})),style:{float:"right"}},{dropdown:(0,a.w5)((()=>[(0,a.Wm)(N,null,{default:(0,a.w5)((()=>[(0,a.Wm)(M,{command:"addTop"},{default:(0,a.w5)((()=>[m])),_:1})])),_:1})])),default:(0,a.w5)((()=>[(0,a._)("span",r,[(0,a.Wm)(L,null,{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)(A.iconMore)))])),_:1})])])),_:1})])]),(0,a._)("div",n,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(A.cateTree,(e=>((0,a.wg)(),(0,a.iD)("li",{key:e.id},[e.children&&0!=e.children.length?((0,a.wg)(),(0,a.j4)(L,{key:0},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)("block"==A.showSub&&e.id==A.nowSubId?A.icon:A.iconRight),{onClick:l=>j.toggleSub(e)},null,8,["onClick"]))])),_:2},1024)):(0,a.kq)("",!0),(0,a._)("div",{class:"tree-item",onClick:l=>j.itemData(e.id)},[(0,a._)("span",{class:(0,o.C_)(["cate-title",{active:A.cate_id==e.id}])},(0,o.zw)(e.name),3),(0,a.Wm)(T,{onCommand:l=>j.handleCommand(l,e),style:{float:"right"},class:(0,o.C_)({"menu-right":e.children&&0!=e.children.length})},{dropdown:(0,a.w5)((()=>[(0,a.Wm)(N,null,{default:(0,a.w5)((()=>[(0,a.Wm)(M,{command:"add"},{default:(0,a.w5)((()=>[p])),_:1}),(0,a.Wm)(M,{command:"edit"},{default:(0,a.w5)((()=>[h])),_:1}),(0,a.Wm)(M,{command:"del"},{default:(0,a.w5)((()=>[f])),_:1})])),_:1})])),default:(0,a.w5)((()=>[(0,a._)("span",c,[(0,a.Wm)(L,null,{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)(A.iconMore)))])),_:1})])])),_:2},1032,["onCommand","class"])],8,u),e.children&&0!=e.children.length?((0,a.wg)(),(0,a.iD)("ul",{key:1,class:"child-sub",style:(0,o.j5)({display:e.id==A.nowSubId?A.showSub:"none"})},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.children,(e=>((0,a.wg)(),(0,a.iD)("li",{key:e.id},[(0,a._)("div",{class:"tree-item",onClick:l=>j.itemData(e.id)},[(0,a._)("span",{class:(0,o.C_)(["cate-title sub-name",{active:A.cate_id==e.id}]),style:{width:"100px !important"}},(0,o.zw)(e.name),3),(0,a.Wm)(T,{onCommand:l=>j.handleCommand(l,e),style:{float:"right",top:"-16px",left:"2px"}},{dropdown:(0,a.w5)((()=>[(0,a.Wm)(N,null,{default:(0,a.w5)((()=>[(0,a.Wm)(M,{command:"edit"},{default:(0,a.w5)((()=>[b])),_:1}),(0,a.Wm)(M,{command:"del"},{default:(0,a.w5)((()=>[_])),_:1})])),_:1})])),default:(0,a.w5)((()=>[(0,a._)("span",w,[(0,a.Wm)(L,null,{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)(A.iconMore)))])),_:1})])])),_:2},1032,["onCommand"])],8,g)])))),128))],4)):(0,a.kq)("",!0)])))),128))])])])),_:1},8,["width"]),(0,a.Wm)(K,{style:{height:"100%"}},{default:(0,a.w5)((()=>[(0,a.Wm)(J,null,{default:(0,a.w5)((()=>[(0,a.Wm)(E,null,{default:(0,a.w5)((()=>[(0,a._)("div",y,[t.needSelect?((0,a.wg)(),(0,a.j4)(R,{key:0,value:A.selectedIds.length,class:"item",style:{"margin-right":"15px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(Z,{type:"success",icon:"el-icon-Finished",size:"small",style:{"font-size":"12px"},disabled:!A.selectedIds.length>0,onClick:j.confirmToUse},{default:(0,a.w5)((()=>[v])),_:1},8,["disabled","onClick"])])),_:1},8,["value"])):(0,a.kq)("",!0),(0,a.Wm)(O,{class:"upload-demo",headers:A.header,action:A.uploadImgUrl,data:{cate_id:A.cate_id},"show-file-list":!1,"before-upload":j.handleBefore,"on-success":j.handleSuccess,"on-progress":j.handleProgress,limit:1},{default:(0,a.w5)((()=>[(0,a.Wm)(Z,{type:"primary",icon:"el-icon-UploadFilled",size:"small",style:{"font-size":"12px"}},{default:(0,a.w5)((()=>[V])),_:1})])),_:1},8,["headers","action","data","before-upload","on-success","on-progress"]),(0,a.Wm)(O,{class:"upload-demo",action:A.uploadVideoUrl,data:{cate_id:A.cate_id},"show-file-list":!1,"before-upload":j.handleBefore,"on-success":j.handleSuccess,"on-progress":j.handleProgress,limit:1},{default:(0,a.w5)((()=>[(0,a.Wm)(Z,{type:"primary",icon:"el-icon-UploadFilled",size:"small",style:{"font-size":"12px"}},{default:(0,a.w5)((()=>[k])),_:1})])),_:1},8,["action","data","before-upload","on-success","on-progress"]),(0,a.Wm)(Z,{type:"danger",icon:"el-icon-DeleteFilled",size:"small",style:{"font-size":"12px"},disabled:!A.selectedIds.length>0,onClick:j.delFile},{default:(0,a.w5)((()=>[W])),_:1},8,["disabled","onClick"])])])),_:1}),(0,a.Wm)(K,null,{default:(0,a.w5)((()=>[(0,a._)("div",{class:"imgList",style:(0,o.j5)(t.needSelect?"width:710px":"width:1190px")},[A.uploading?((0,a.wg)(),(0,a.iD)("div",x,[(0,a.Wm)(H,{type:"circle",percentage:A.uplodPercent},{default:(0,a.w5)((()=>[U])),_:1},8,["percentage"])])):(0,a.kq)("",!0),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(A.fileList,((e,l)=>((0,a.wg)(),(0,a.iD)("div",{class:(0,o.C_)(["img-box",{"clear-margin":l%A.oneLineNum==1}]),key:e.id},[(0,a._)("div",{class:"item-box",onClick:l=>j.selectFile(e)},[1==e.file_type?((0,a.wg)(),(0,a.j4)(B,{key:0,style:{width:"100px",height:"100px"},"preview-src-list":A.srcList,src:e.url},null,8,["preview-src-list","src"])):(0,a.kq)("",!0),2==e.file_type?((0,a.wg)(),(0,a.iD)("video",I,[(0,a._)("source",{src:e.url,type:e.mine},null,8,$),S])):(0,a.kq)("",!0),-1!=A.selectedIds.indexOf(e.id)?((0,a.wg)(),(0,a.iD)("div",D,"选中")):(0,a.kq)("",!0)],8,C),(0,a._)("div",F,(0,o.zw)(e.filename),1)],2)))),128))],4),(0,a.Wm)(Y,{background:"",layout:"->, prev, pager, next","page-size":t.pageSize,onCurrentChange:j.handlePageChange,total:A.total},null,8,["page-size","onCurrentChange","total"])])),_:1})])),_:1})])),_:1})])),_:1}),(0,a.Wm)(le,{modelValue:A.dialogFormVisible,"onUpdate:modelValue":l[4]||(l[4]=e=>A.dialogFormVisible=e),title:"分类管理",width:"500px"},{footer:(0,a.w5)((()=>[(0,a._)("span",q,[(0,a.Wm)(Z,{onClick:l[3]||(l[3]=e=>A.dialogFormVisible=!1)},{default:(0,a.w5)((()=>[P])),_:1}),(0,a.Wm)(Z,{type:"primary",onClick:j.submitCate,loading:A.loading},{default:(0,a.w5)((()=>[z])),_:1},8,["onClick","loading"])])])),default:(0,a.w5)((()=>[(0,a.Wm)(ee,{model:A.cateForm},{default:(0,a.w5)((()=>[(0,a.Wm)(X,{label:"分类名称","label-width":A.formLabelWidth},{default:(0,a.w5)((()=>[(0,a.Wm)(Q,{modelValue:A.cateForm.name,"onUpdate:modelValue":l[2]||(l[2]=e=>A.cateForm.name=e),autocomplete:"off"},null,8,["modelValue"])])),_:1},8,["label-width"])])),_:1},8,["model"])])),_:1},8,["modelValue"])],64)}t(7658);var j=t(2509),L=t(558),M={props:{needSelect:{type:Boolean,default:!0},selectNum:{type:Number,default:0},fileType:{type:Number,default:1},pageSize:{type:Number,default:18}},data(){return{cate_id:0,cateForm:{pid:0,name:""},uploadImgUrl:j.Z.API_URL+"/system.attachment/uploadPicture",uploadVideoUrl:j.Z.API_URL+"/system.attachment/uploadVideo",header:{Authorization:j.Z.TOKEN_PREFIX+L.Z.cookie.get("TOKEN")},srcList:[],fileList:[],oneLineNum:10,page:1,total:1,uploading:!1,uplodPercent:0,selectedFile:[],selectedIds:[],formLabelWidth:80,dialogFormVisible:!1,loading:!1,cateTree:[],nowSubId:0,showSub:"none",icon:"el-icon-CaretBottom",iconRight:"el-icon-CaretRight",iconMore:"el-icon-MoreFilled"}},mounted(){this.getAttachmentCate(),this.needSelect&&(this.oneLineNum=6),this.getResource()},methods:{handleCommand(e,l){"add"==e?(this.cateForm.pid=l.id,this.dialogFormVisible=!0):"addTop"==e?(this.cateForm.pid=0,this.dialogFormVisible=!0):"edit"==e?(this.cateForm.id=l.id,this.cateForm.pid=l.pid,this.cateForm.name=l.name,this.dialogFormVisible=!0):"del"==e&&this.$confirm("此操作将永久删除该分类, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{let e=await this.$API.attachmentCate.del.get({id:l.id});0==e.code?(this.$message.success(e.msg),this.getAttachmentCate()):this.$message.error(e.msg)})).catch((()=>{}))},itemData(e){this.cate_id=e,this.getResource()},toggleSub(e){this.nowSubId=e.id,this.showSub="none"===this.showSub?"block":"none"},async getAttachmentCate(){let e=await this.$API.attachmentCate.list.get();this.cateTree=e.data},async submitCate(){if(""==this.cateForm.name)return void this.$message.error("请输入分类名称");let e;this.loading=!0,e=this.cateForm.id?await this.$API.attachmentCate.edit.post(this.cateForm):await this.$API.attachmentCate.add.post(this.cateForm),this.loading=!1,0==e.code?(this.$message.success(e.msg),this.getAttachmentCate()):this.$message.error(e.msg),this.dialogFormVisible=!1},async getResource(){let e=await this.$API.attachment.list.get({cate_id:this.cate_id,page:this.page,limit:this.pageSize});0==e.code&&(this.fileList=e.data.rows,this.total=e.data.total)},handlePageChange(e){this.page=e,this.getResource()},handleBefore(){this.uploading=!0},handleSuccess(){this.uploading=!1,this.$message.success("上传成功"),this.getResource()},handleProgress(e){this.uplodPercent=e.percent},previewPic(e){this.srcList=[],this.srcList.push(e)},selectFile(e){if(this.needSelect&&this.fileType!=parseInt(e.file_type)){let e="图片";return 2==this.fileType&&(e="视频"),void this.$message.error("只可以选择"+e)}if(-1!=this.selectedIds.indexOf(e.id))this.selectedIds.splice(this.selectedIds.indexOf(e.id),1),this.selectedFile.splice(this.selectedIds.indexOf(e.id),1);else{if(this.needSelect&&this.selectedIds.length+1>this.selectNum)return void this.$message.error("最多选则"+this.selectNum+"个");this.selectedIds.push(e.id),this.selectedFile.push(e)}},confirmToUse(){let e=JSON.parse(JSON.stringify(this.selectedFile));this.$emit("selectedFiles",e),this.selectedIds=[],this.selectedFile=[]},async delFile(){if(0==this.selectedIds.length)return void this.$message.error("请先选择要删除的资源");let e=await this.$API.attachment.del.get({ids:this.selectedIds});0==e.code?(this.$message.success("删除成功"),this.getResource(),this.selectedFile=[],this.selectedIds=[]):this.$message.error(e.msg)}}},N=t(3744);const T=(0,N.Z)(M,[["render",A],["__scopeId","data-v-a595b130"]]);var G=T},6127:function(e,l,t){t.r(l),t.d(l,{default:function(){return h}});var a=t(6252);const o={class:"sceditor"};function i(e,l,t,i,s,d){const r=(0,a.up)("Editor"),m=(0,a.up)("Attachment"),n=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",o,[(0,a.Wm)(r,{modelValue:s.contentValue,"onUpdate:modelValue":l[0]||(l[0]=e=>s.contentValue=e),init:s.init,disabled:t.disabled,placeholder:t.placeholder,onOnClick:d.onClick},null,8,["modelValue","init","disabled","placeholder","onOnClick"])]),(0,a.Wm)(n,{title:"选择资源",modelValue:s.attachmentDialogVisible,"onUpdate:modelValue":l[1]||(l[1]=e=>s.attachmentDialogVisible=e),width:1200,"destroy-on-close":""},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{"select-num":999999,onSelectedFiles:d.attachmentSelected},null,8,["onSelectedFiles"])])),_:1},8,["modelValue"])],64)}var s=t(1686),d=t(7877),r=t(396),m=t(7575),n=t.n(m),u=(t(8860),t(6890),t(7490),t(8190),t(2682),t(4446),t(1449),t(8619),t(8843),t(6552),t(4400),t(8672),{components:{Editor:r.Z,Attachment:s.Z},props:{modelValue:{type:String,default:""},placeholder:{type:String,default:""},height:{type:Number,default:300},disabled:{type:Boolean,default:!1},plugins:{type:[String,Array],default:"code link table quickbars pagebreak lists advlist"},toolbar:{type:[String,Array],default:"undo redo |  forecolor backcolor bold italic underline strikethrough link blocks fontfamily fontsize \t\t\t\t\talignleft aligncenter alignright alignjustify outdent indent numlist bullist \t\t\t\t\tpagebreak table code selectall attachment"},templates:{type:Array,default:()=>[]}},data(){return{attachmentDialogVisible:!1,init:{language_url:"tinymce/langs/zh_CN.js",language:"zh_CN",skin_url:"tinymce/skins/ui/oxide",content_css:"tinymce/skins/content/default/content.css",menubar:!1,statusbar:!0,plugins:this.plugins,toolbar:this.toolbar,toolbar_mode:"sliding",font_size_formats:"12px 14px 16px 18px 22px 24px 36px 72px",height:this.height,placeholder:this.placeholder,branding:!1,resize:!0,elementpath:!0,content_style:"",templates:this.templates,quickbars_selection_toolbar:"forecolor backcolor bold italic underline strikethrough link",quickbars_image_toolbar:"alignleft aligncenter alignright",quickbars_insert_toolbar:!1,image_caption:!0,image_advtab:!0,images_upload_handler:function(e){return new Promise(((l,t)=>{const a=new FormData;a.append("file",e.blob(),e.filename()),d.Z.common.upload.post(a).then((e=>{l(e.data.src)})).catch((()=>{t("Image upload failed")}))}))},setup:e=>{e.on("init",(function(){this.getBody().style.fontSize="14px"})),e.on("OpenWindow",(function(e){var l=document.querySelector(".el-drawer.open"),t=e.target.editorContainer;if(l&&l.contains(t)){var a=document.activeElement;setTimeout((()=>{document.activeElement.blur(),a.focus()}),0)}})),e.ui.registry.addButton("attachment",{text:"",icon:"image",onAction:()=>{this.attachmentDialogVisible=!0}})}},contentValue:this.modelValue}},watch:{modelValue(e){this.contentValue=e},contentValue(e){this.$emit("update:modelValue",e)}},mounted(){n().init({})},methods:{onClick(e){this.$emit("onClick",e,n())},attachmentSelected(e){if(e.length){let l="";for(let t in e)l+='<img src="'+e[t].url+'" style="max-width: 100%;">';n().activeEditor.insertContent(l)}this.attachmentDialogVisible=!1}}}),c=t(3744);const p=(0,c.Z)(u,[["render",i]]);var h=p},5603:function(e,l,t){t.r(l),t.d(l,{default:function(){return n}});var a=t(6252);const o=(0,a.Uk)("取 消"),i=(0,a.Uk)("保 存");function s(e,l,t,s,d,r){const m=(0,a.up)("el-option"),n=(0,a.up)("el-select"),u=(0,a.up)("el-form-item"),c=(0,a.up)("el-input"),p=(0,a.up)("el-form"),h=(0,a.up)("el-button"),f=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.j4)(f,{title:d.titleMap[d.mode],modelValue:d.visible,"onUpdate:modelValue":l[9]||(l[9]=e=>d.visible=e),width:600,"destroy-on-close":"",onClosed:l[10]||(l[10]=l=>e.$emit("closed"))},{footer:(0,a.w5)((()=>[(0,a.Wm)(h,{onClick:l[7]||(l[7]=e=>d.visible=!1)},{default:(0,a.w5)((()=>[o])),_:1}),"show"!=d.mode?((0,a.wg)(),(0,a.j4)(h,{key:0,type:"primary",loading:d.isSaveing,onClick:l[8]||(l[8]=e=>r.submit())},{default:(0,a.w5)((()=>[i])),_:1},8,["loading"])):(0,a.kq)("",!0)])),default:(0,a.w5)((()=>[(0,a.Wm)(p,{model:d.form,rules:d.rules,disabled:"show"==d.mode,ref:"dialogForm","label-width":"100px","label-position":"left"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{label:"所属角色",prop:"role_id"},{default:(0,a.w5)((()=>[(0,a.Wm)(n,{modelValue:d.form.role_id,"onUpdate:modelValue":l[0]||(l[0]=e=>d.form.role_id=e),style:{width:"100%"}},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(d.roles,(e=>((0,a.wg)(),(0,a.j4)(m,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,a.Wm)(u,{label:"登录账号",prop:"username"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{modelValue:d.form.username,"onUpdate:modelValue":l[1]||(l[1]=e=>d.form.username=e),placeholder:"英文+数字,用于登录系统",clearable:""},null,8,["modelValue"])])),_:1}),"add"==d.mode?((0,a.wg)(),(0,a.j4)(u,{key:0,label:"登录密码",prop:"password"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{type:"password",modelValue:d.form.password,"onUpdate:modelValue":l[2]||(l[2]=e=>d.form.password=e),clearable:"","show-password":""},null,8,["modelValue"])])),_:1})):((0,a.wg)(),(0,a.j4)(u,{key:1,label:"登录密码"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{type:"password",modelValue:d.form.password,"onUpdate:modelValue":l[3]||(l[3]=e=>d.form.password=e),clearable:"","show-password":"",placeholder:"输入则为修改"},null,8,["modelValue"])])),_:1})),(0,a.Wm)(u,{label:"昵称",prop:"name"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{modelValue:d.form.nickname,"onUpdate:modelValue":l[4]||(l[4]=e=>d.form.nickname=e),placeholder:"昵称",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(u,{label:"邮箱"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{modelValue:d.form.email,"onUpdate:modelValue":l[5]||(l[5]=e=>d.form.email=e),placeholder:"",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(u,{label:"手机号"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{modelValue:d.form.phone,"onUpdate:modelValue":l[6]||(l[6]=e=>d.form.phone=e),placeholder:"",clearable:""},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules","disabled"])])),_:1},8,["title","modelValue"])}var d={emits:["success","closed"],data(){return{mode:"add",titleMap:{add:"新增管理员",edit:"编辑管理员",show:"查看"},visible:!1,isSaveing:!1,form:{id:"",role_id:"",username:"",nickname:"",password:"",avatar:"",email:"",phone:"",status:1},rules:{role_id:[{required:!0,message:"请选择所属角色",trigger:"blur"}],username:[{required:!0,message:"请输入登录账号",trigger:"blur"}],password:[{required:!0,message:"请输入登录密码",trigger:"blur"}]},roles:[]}},mounted(){this.getAllRole()},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},async getAllRole(){let e=await this.$API.role.getAllRole.get({hashmart_auth_skip:1});this.roles=e.data},submit(){this.$refs.dialogForm.validate((async e=>{if(!e)return!1;var l;this.isSaveing=!0,l="add"==this.mode?await this.$API.admin.add.post(this.form):await this.$API.admin.edit.post(this.form),this.isSaveing=!1,0==l.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success(l.msg)):this.$message.error(l.msg)}))},setData(e){this.form.id=e.id,this.form.username=e.username,this.form.role_id=e.role_id,this.form.nickname=e.nickname,this.form.email=e.email,this.form.phone=e.phone,this.form.status=e.status}}},r=t(3744);const m=(0,r.Z)(d,[["render",s]]);var n=m},5622:function(e,l,t){t.r(l),t.d(l,{default:function(){return u}});var a=t(6252),o=t(3577);const i=(0,a._)("br",null,null,-1),s=(0,a._)("br",null,null,-1);function d(e,l,t,d,r,m){const n=(0,a.up)("el-table-column"),u=(0,a.up)("el-image"),c=(0,a.up)("el-table"),p=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.j4)(p,{title:r.titleMap[r.mode],modelValue:r.visible,"onUpdate:modelValue":l[0]||(l[0]=e=>r.visible=e),width:1200,"destroy-on-close":"",onClosed:l[1]||(l[1]=l=>e.$emit("closed")),"close-on-click-modal":!1},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{data:r.form,style:{width:"100%"}},{default:(0,a.w5)((()=>[(0,a.Wm)(n,{prop:"id",label:"ID"}),(0,a.Wm)(n,{label:"用户名"},{default:(0,a.w5)((e=>[(0,a.Uk)((0,o.zw)(e.row.user_name)+" ",1),i,(0,a.Uk)(" ID: "+(0,o.zw)(e.row.user_id),1)])),_:1}),(0,a.Wm)(n,{prop:"order_time",label:"下单时间戳"}),(0,a.Wm)(n,{prop:"hash_key",label:"hash_key"}),(0,a.Wm)(n,{prop:"hash_no",label:"中奖数字"}),(0,a.Wm)(n,{label:"获得商品图片"},{default:(0,a.w5)((e=>[(0,a.Wm)(u,{src:e.row.goods_image,style:{height:"36px",width:"36px"}},null,8,["src"])])),_:1}),(0,a.Wm)(n,{label:"获得商品"},{default:(0,a.w5)((e=>[(0,a.Uk)((0,o.zw)(e.row.goods_name)+" ",1),s,(0,a.Uk)(" ID: "+(0,o.zw)(e.row.goods_id),1)])),_:1}),(0,a.Wm)(n,{prop:"profit",label:"盈亏"})])),_:1},8,["data"])])),_:1},8,["title","modelValue"])}var r={name:"blindBoxOrderDetail",emits:["success","closed"],data(){return{mode:"detail",titleMap:{detail:"中奖记录"},visible:!1,form:{}}},mounted(){},methods:{open(e){return this.form=e,this.visible=!0,this}}},m=t(3744);const n=(0,m.Z)(r,[["render",d]]);var u=n},8742:function(e,l,t){t.r(l),t.d(l,{default:function(){return c}});var a=t(6252);const o=(0,a.Uk)("显示"),i=(0,a.Uk)("隐藏"),s=(0,a.Uk)("取 消"),d=(0,a.Uk)("保 存");function r(e,l,t,r,m,n){const u=(0,a.up)("el-input"),c=(0,a.up)("el-form-item"),p=(0,a.up)("el-radio"),h=(0,a.up)("el-form"),f=(0,a.up)("el-button"),g=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.j4)(g,{title:m.titleMap[m.mode],modelValue:m.visible,"onUpdate:modelValue":l[6]||(l[6]=e=>m.visible=e),width:600,"destroy-on-close":"",onClosed:l[7]||(l[7]=l=>e.$emit("closed")),"close-on-click-modal":!1},{footer:(0,a.w5)((()=>[(0,a.Wm)(f,{onClick:l[4]||(l[4]=e=>m.visible=!1)},{default:(0,a.w5)((()=>[s])),_:1}),"show"!=m.mode?((0,a.wg)(),(0,a.j4)(f,{key:0,type:"primary",loading:m.isSaveing,onClick:l[5]||(l[5]=e=>n.submit())},{default:(0,a.w5)((()=>[d])),_:1},8,["loading"])):(0,a.kq)("",!0)])),default:(0,a.w5)((()=>[(0,a.Wm)(h,{model:m.form,rules:m.rules,disabled:"show"==m.mode,ref:"dialogForm","label-width":"100px","label-position":"left"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{label:"标签名称",prop:"name"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{modelValue:m.form.name,"onUpdate:modelValue":l[0]||(l[0]=e=>m.form.name=e),clearable:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(c,{label:"排序",prop:"sort"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{type:"number",modelValue:m.form.sort,"onUpdate:modelValue":l[1]||(l[1]=e=>m.form.sort=e),clearable:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(c,{label:"是否显示",prop:"status"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{label:1,modelValue:m.form.status,"onUpdate:modelValue":l[2]||(l[2]=e=>m.form.status=e)},{default:(0,a.w5)((()=>[o])),_:1},8,["modelValue"]),(0,a.Wm)(p,{label:2,modelValue:m.form.status,"onUpdate:modelValue":l[3]||(l[3]=e=>m.form.status=e)},{default:(0,a.w5)((()=>[i])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules","disabled"])])),_:1},8,["title","modelValue"])}var m={emits:["success","closed"],data(){return{mode:"add",titleMap:{add:"新增标签",edit:"编辑标签",show:"查看"},resourceVisible:!1,visible:!1,isSaveing:!1,form:{id:"",name:"",sort:1,status:1},plusIcon:"el-icon-plus",deleteIcon:"el-icon-delete",rules:{name:[{required:!0,message:"请输入分类名称",trigger:"blur"}],sort:[{required:!0,message:"请输入排序",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"blur"}]}}},mounted(){},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},submit(){this.$refs.dialogForm.validate((async e=>{if(!e)return!1;var l;this.isSaveing=!0,l="add"==this.mode?await this.$API.blindboxTag.add.post(this.form):await this.$API.blindboxTag.edit.post(this.form),this.isSaveing=!1,0==l.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success(l.msg)):this.$message.error(l.msg)}))},setData(e){this.form.id=e.id,this.form.name=e.name,this.form.sort=e.sort,this.form.status=e.status}}},n=t(3744);const u=(0,n.Z)(m,[["render",r],["__scopeId","data-v-8eda7e86"]]);var c=u},4604:function(e,l,t){t.r(l),t.d(l,{default:function(){return v}});var a=t(6252),o=t(3577);const i=(0,a.Uk)("选择商品"),s=(0,a.Uk)("删除"),d=(0,a.Uk)(" 中奖概率(%) "),r={style:{"margin-left":"10px","font-size":"12px",color:"#F56C6C"}},m=(0,a.Uk)("取 消"),n=(0,a.Uk)("保 存"),u={class:"search-box"},c=(0,a.Uk)("查询"),p=(0,a.Uk)(" "),h={key:0},f={key:1},g={class:"page-div",style:{"margin-top":"20px"}};function w(e,l,t,w,b,_){const y=(0,a.up)("el-button"),v=(0,a.up)("el-table-column"),V=(0,a.up)("el-avatar"),k=(0,a.up)("el-input"),W=(0,a.up)("el-table"),x=(0,a.up)("el-form-item"),U=(0,a.up)("el-option"),C=(0,a.up)("el-select"),I=(0,a.up)("el-icon-QuestionFilled"),$=(0,a.up)("el-icon"),S=(0,a.up)("el-tooltip"),D=(0,a.up)("el-form"),F=(0,a.up)("el-dialog"),q=(0,a.up)("el-cascader"),P=(0,a.up)("el-radio"),z=(0,a.up)("el-pagination");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(F,{title:b.titleMap[b.mode],modelValue:b.visible,"onUpdate:modelValue":l[4]||(l[4]=e=>b.visible=e),width:900,"destroy-on-close":"",onClosed:l[5]||(l[5]=l=>e.$emit("closed")),"close-on-click-modal":!1},{footer:(0,a.w5)((()=>[(0,a.Wm)(y,{onClick:l[2]||(l[2]=e=>b.visible=!1)},{default:(0,a.w5)((()=>[m])),_:1}),"show"!=b.mode?((0,a.wg)(),(0,a.j4)(y,{key:0,type:"primary",loading:b.isSaveing,onClick:l[3]||(l[3]=e=>_.submit())},{default:(0,a.w5)((()=>[n])),_:1},8,["loading"])):(0,a.kq)("",!0)])),default:(0,a.w5)((()=>[(0,a.Wm)(D,{model:b.form,rules:b.rules,disabled:"show"==b.mode,ref:"dialogForm","label-width":"110px","label-position":"left"},{default:(0,a.w5)((()=>[(0,a.Wm)(x,{label:"选择商品",prop:"goods_name"},{default:(0,a.w5)((()=>[(0,a.Wm)(y,{type:"primary",icon:"el-icon-plus",onClick:_.selectGoods,size:"small"},{default:(0,a.w5)((()=>[i])),_:1},8,["onClick"]),(0,a.Wm)(W,{data:b.selectedGoods,style:{width:"100%"}},{default:(0,a.w5)((()=>[(0,a.Wm)(v,{prop:"id",label:"ID",width:"70px"}),(0,a.Wm)(v,{label:"商品图",width:"60px"},{default:(0,a.w5)((e=>[(0,a.Wm)(V,{shape:"square",size:36,src:e.row.image.split(",")[0]},null,8,["src"])])),_:1}),(0,a.Wm)(v,{prop:"name","show-overflow-tooltip":!0,label:"商品名"}),(0,a.Wm)(v,{prop:"price",label:"价格"}),(0,a.Wm)(v,{prop:"recovery_price",label:"兑换价格"}),(0,a.Wm)(v,{label:"库存"},{default:(0,a.w5)((e=>[(0,a.Wm)(k,{modelValue:e.row.stock,"onUpdate:modelValue":l=>e.row.stock=l,type:"number"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,a.Wm)(v,{label:"操作"},{default:(0,a.w5)((e=>[(0,a.Wm)(y,{onClick:l=>_.handleDel(e.row),type:"text",size:"small"},{default:(0,a.w5)((()=>[s])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])])),_:1}),(0,a.Wm)(x,{label:"选择商品标签",prop:"tag_id"},{default:(0,a.w5)((()=>[(0,a.Wm)(C,{modelValue:b.form.tag_id,"onUpdate:modelValue":l[0]||(l[0]=e=>b.form.tag_id=e),placeholder:"请选择",style:{width:"300px"}},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(b.options,(e=>((0,a.wg)(),(0,a.j4)(U,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,a.Wm)(x,null,{label:(0,a.w5)((()=>[d,(0,a.Wm)(S,{class:"item",effect:"dark",placement:"top",content:"如：5%，填5"},{default:(0,a.w5)((()=>[(0,a.Wm)($,{style:{"margin-top":"10px","margin-left":"5px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(I)])),_:1})])),_:1})])),default:(0,a.w5)((()=>[(0,a.Wm)(k,{modelValue:b.form.probability,"onUpdate:modelValue":l[1]||(l[1]=e=>b.form.probability=e),style:{width:"300px"},onBlur:_.probabilityChange},null,8,["modelValue","onBlur"]),(0,a._)("span",r," （当前可设置的最大值为："+(0,o.zw)(b.maxProbability)+"）",1)])),_:1}),(0,a.Wm)(x,{label:"中奖数字范围"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(b.form.lottery_min_no)+" ~ "+(0,o.zw)(b.form.lottery_max_no),1)])),_:1})])),_:1},8,["model","rules","disabled"])])),_:1},8,["title","modelValue"]),(0,a.Wm)(F,{title:"商品选择",modelValue:b.dialogVisible,"onUpdate:modelValue":l[9]||(l[9]=e=>b.dialogVisible=e),width:"50%"},{default:(0,a.w5)((()=>[(0,a._)("div",u,[(0,a.Wm)(D,{inline:!0,model:b.searchForm,class:"demo-form-inline",style:{"margin-top":"20px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(x,{label:"商品名称"},{default:(0,a.w5)((()=>[(0,a.Wm)(k,{modelValue:b.searchForm.name,"onUpdate:modelValue":l[6]||(l[6]=e=>b.searchForm.name=e),placeholder:"",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(x,{label:"商品分类"},{default:(0,a.w5)((()=>[(0,a.Wm)(q,{modelValue:b.selectedCate,"onUpdate:modelValue":l[7]||(l[7]=e=>b.selectedCate=e),options:b.goodsCate,props:b.treeProps,clearable:""},null,8,["modelValue","options","props"])])),_:1}),(0,a.Wm)(x,null,{default:(0,a.w5)((()=>[(0,a.Wm)(y,{type:"primary",onClick:_.onSubmit,icon:"el-icon-search"},{default:(0,a.w5)((()=>[c])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])]),(0,a.Wm)(W,{data:b.tableData,"row-style":{height:"57px"},onRowClick:_.singleElection,"highlight-current-row":"",style:{width:"100%","font-size":"12px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(v,{width:"55",label:"选择"},{default:(0,a.w5)((e=>[(0,a.Wm)(P,{class:"radio",modelValue:b.templateSelection,"onUpdate:modelValue":l[8]||(l[8]=e=>b.templateSelection=e),label:e.row.id},{default:(0,a.w5)((()=>[p])),_:2},1032,["modelValue","label"])])),_:1}),(0,a.Wm)(v,{prop:"id",label:"商品ID",width:"100px"}),(0,a.Wm)(v,{label:"商品图",width:"100px"},{default:(0,a.w5)((e=>[(0,a.Wm)(V,{shape:"square",size:36,src:e.row.image.split(",")[0]},null,8,["src"])])),_:1}),(0,a.Wm)(v,{prop:"name",label:"商品名称"}),(0,a.Wm)(v,{prop:"cate.name",width:"100px",label:"商品分类"}),(0,a.Wm)(v,{prop:"price",width:"100px",label:"商品售价"}),(0,a.Wm)(v,{prop:"recovery_price",width:"100px",label:"兑换价格"}),(0,a.Wm)(v,{width:"100px",label:"库存"},{default:(0,a.w5)((e=>[-1==e.row.stock?((0,a.wg)(),(0,a.iD)("span",h,"无限库存")):((0,a.wg)(),(0,a.iD)("span",f,(0,o.zw)(e.row.stock),1))])),_:1})])),_:1},8,["data","onRowClick"]),(0,a._)("div",g,[(0,a.Wm)(z,{background:"",layout:"->, prev, pager, next","page-size":b.searchForm.limit,onCurrentChange:_.pageChangeHandle,total:b.page.total},null,8,["page-size","onCurrentChange","total"])])])),_:1},8,["modelValue"])],64)}var b={emits:["success","closed"],data(){return{mode:"add",titleMap:{add:"新增盲盒商品",edit:"编辑盲盒商品",show:"查看"},dialogVisible:!1,visible:!1,isSaveing:!1,maxNum:1048575,form:{id:"",blindbox_id:"",tag_id:"",goods_id:"",goods_name:"",goods_image:"",price:"",recovery_price:"",stock:0,lottery_min_no:0,lottery_max_no:0,probability:0},options:[],plusIcon:"el-icon-plus",deleteIcon:"el-icon-delete",rules:{goods_name:[{required:!0,message:"请选择商品",trigger:"blur"}],tag_id:[{required:!0,message:"请选择标签",trigger:"blur"}]},selectedGoods:[],selectedCate:"",goodsCate:[],treeProps:{value:"id",label:"name",children:"children",checkStrictly:!0},searchForm:{goods_type:2,status:1,name:"",cate_id:"",page:1,limit:10},page:{total:0},tableData:[],templateSelection:"",maxProbability:""}},mounted(){this.getBlindboxTag(),this.getList(),this.getGoodsCate()},methods:{open(e="add",l){return this.mode=e,this.visible=!0,this.form.blindbox_id=l,"add"==e&&this.getMaxPercent(l,0),this},onSubmit(){this.selectedCate?(1==this.selectedCate.length&&(this.searchForm.cate_id=this.selectedCate[0]),2==this.selectedCate.length&&(this.searchForm.cate_id=this.selectedCate[1])):this.searchForm.cate_id="",this.getList()},submit(){this.$refs.dialogForm.validate((async e=>{if(!e)return!1;var l;this.isSaveing=!0,l="add"==this.mode?await this.$API.blindboxDetail.add.post(this.form):await this.$API.blindboxDetail.edit.post(this.form),this.isSaveing=!1,0==l.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success(l.msg)):this.$message.error(l.msg)}))},probabilityChange(){this.getLotteryNoRange(this.form.blindbox_id,this.form.probability)},removeIcon(){this.form.pic=""},showImage(){this.resourceVisible=!0},selectedFiles(e){this.form.pic=e[0].url,this.resourceVisible=!1},setData(e){this.form.id=e.id,this.form.blindbox_id=e.blindbox_id,this.form.tag_id=e.tag_id,this.form.goods_id=e.goods_id,this.form.goods_name=e.goods_name,this.form.goods_image=e.goods_image,this.form.price=e.price,this.form.recovery_price=e.recovery_price,this.form.stock=e.stock,this.form.lottery_min_no=e.lottery_min_no,this.form.lottery_max_no=e.lottery_max_no,this.form.probability=e.probability,this.selectedGoods=[{id:e.goods_id,image:e.goods_image,name:e.goods_name,price:e.price,recovery_price:e.recovery_price,stock:e.stock}],this.getMaxPercent(e.blindbox_id,e.probability)},selectGoods(){this.dialogVisible=!0},handleDel(){this.selectedGoods=[],this.form.goods_id=0,this.form.goods_name="",this.form.goods_image="",this.form.price=0,this.form.stock=-1},async getBlindboxTag(){let e=await this.$API.blindboxTag.list.get({limit:9999999,page:1,status:1});this.options=e.data.rows},async getMaxPercent(e,l){let t=await this.$API.blindboxDetail.getMaxPercent.get({blindbox_id:e,percent:l});0==t.code?this.maxProbability=t.data.percent:this.$message.success(t.msg)},pageChangeHandle(e){this.searchForm.page=e,this.getList()},async getList(){let e=await this.$API.goods.list.get(this.searchForm);this.tableData=e.data.rows,this.page.total=e.data.total},async getGoodsCate(){let e=await this.$API.goodsCate.list.get();this.goodsCate=e.data},singleElection(e){this.templateSelection=e.id,this.selectedGoods=this.tableData.filter((l=>l.id===e.id)),this.form.goods_id=this.selectedGoods[0].id,this.form.goods_image=this.selectedGoods[0].image,this.form.goods_name=this.selectedGoods[0].name,this.form.price=this.selectedGoods[0].price,this.form.stock=this.selectedGoods[0].stock,this.dialogVisible=!1},async getLotteryNoRange(e,l){if(!l)return void this.$message.error("请输入正确的概率");let t=await this.$API.blindboxDetail.getLotteryNumRange.get({blindbox_id:e,percent:l});0==t.code?(this.form.lottery_min_no=t.data.lottery_min_no,this.form.lottery_max_no=t.data.lottery_max_no):this.$message.error(t.msg)}}},_=t(3744);const y=(0,_.Z)(b,[["render",w],["__scopeId","data-v-29107d2a"]]);var v=y},5305:function(e,l,t){t.r(l),t.d(l,{default:function(){return v}});var a=t(6252);const o=e=>((0,a.dD)("data-v-46c1815e"),e=e(),(0,a.Cn)(),e),i={class:"img-list"},s={key:0},d=["src"],r={class:"img-tools"},m=o((()=>(0,a._)("li",{style:{color:"#999","font-size":"12px",width:"250px","line-height":"58px","margin-left":"30px"}}," 建议尺寸：250*250 ",-1))),n=(0,a.Uk)("是"),u=(0,a.Uk)("否"),c=(0,a.Uk)("是"),p=(0,a.Uk)("否"),h=(0,a.Uk)("取 消"),f=(0,a.Uk)("保 存");function g(e,l,t,o,g,w){const b=(0,a.up)("el-input"),_=(0,a.up)("el-form-item"),y=(0,a.up)("el-icon"),v=(0,a.up)("el-radio"),V=(0,a.up)("el-form"),k=(0,a.up)("el-button"),W=(0,a.up)("el-dialog"),x=(0,a.up)("Attachment");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(W,{title:g.titleMap[g.mode],modelValue:g.visible,"onUpdate:modelValue":l[12]||(l[12]=e=>g.visible=e),width:600,"destroy-on-close":"",onClosed:l[13]||(l[13]=l=>e.$emit("closed")),"close-on-click-modal":!1},{footer:(0,a.w5)((()=>[(0,a.Wm)(k,{onClick:l[10]||(l[10]=e=>g.visible=!1)},{default:(0,a.w5)((()=>[h])),_:1}),"show"!=g.mode?((0,a.wg)(),(0,a.j4)(k,{key:0,type:"primary",loading:g.isSaveing,onClick:l[11]||(l[11]=e=>w.submit())},{default:(0,a.w5)((()=>[f])),_:1},8,["loading"])):(0,a.kq)("",!0)])),default:(0,a.w5)((()=>[(0,a.Wm)(V,{model:g.form,rules:g.rules,disabled:"show"==g.mode,ref:"dialogForm","label-width":"100px","label-position":"left"},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{label:"盲盒名称",prop:"name"},{default:(0,a.w5)((()=>[(0,a.Wm)(b,{modelValue:g.form.name,"onUpdate:modelValue":l[0]||(l[0]=e=>g.form.name=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(_,{label:"封面图",prop:"pic"},{default:(0,a.w5)((()=>[(0,a._)("ul",i,[g.form.pic?((0,a.wg)(),(0,a.iD)("li",s,[(0,a._)("img",{src:g.form.pic,alt:"封面图",style:{height:"58px",width:"58px"}},null,8,d),(0,a._)("div",r,[(0,a.Wm)(y,{style:{"font-size":"14px",color:"#fff"},onClick:l[1]||(l[1]=e=>w.removeIcon())},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)(g.deleteIcon)))])),_:1})])])):(0,a.kq)("",!0),(0,a._)("li",null,[(0,a._)("div",{class:"addImg",onClick:l[2]||(l[2]=(...e)=>w.showImage&&w.showImage(...e))},[(0,a.Wm)(y,null,{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)(g.plusIcon)))])),_:1})])]),m])])),_:1}),(0,a.Wm)(_,{label:"单抽价格",prop:"price"},{default:(0,a.w5)((()=>[(0,a.Wm)(b,{modelValue:g.form.price,"onUpdate:modelValue":l[3]||(l[3]=e=>g.form.price=e),type:"number"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(_,{label:"描述"},{default:(0,a.w5)((()=>[(0,a.Wm)(b,{modelValue:g.form.desc,"onUpdate:modelValue":l[4]||(l[4]=e=>g.form.desc=e),rows:"3",type:"textarea"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(_,{label:"排序"},{default:(0,a.w5)((()=>[(0,a.Wm)(b,{modelValue:g.form.sort,"onUpdate:modelValue":l[5]||(l[5]=e=>g.form.sort=e),clearable:"",type:"number"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(_,{label:"是否热门"},{default:(0,a.w5)((()=>[(0,a.Wm)(v,{label:1,modelValue:g.form.hot_tag,"onUpdate:modelValue":l[6]||(l[6]=e=>g.form.hot_tag=e)},{default:(0,a.w5)((()=>[n])),_:1},8,["modelValue"]),(0,a.Wm)(v,{label:2,modelValue:g.form.hot_tag,"onUpdate:modelValue":l[7]||(l[7]=e=>g.form.hot_tag=e)},{default:(0,a.w5)((()=>[u])),_:1},8,["modelValue"])])),_:1}),(0,a.Wm)(_,{label:"是否推荐"},{default:(0,a.w5)((()=>[(0,a.Wm)(v,{label:1,modelValue:g.form.recommend_tag,"onUpdate:modelValue":l[8]||(l[8]=e=>g.form.recommend_tag=e)},{default:(0,a.w5)((()=>[c])),_:1},8,["modelValue"]),(0,a.Wm)(v,{label:2,modelValue:g.form.recommend_tag,"onUpdate:modelValue":l[9]||(l[9]=e=>g.form.recommend_tag=e)},{default:(0,a.w5)((()=>[p])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules","disabled"])])),_:1},8,["title","modelValue"]),(0,a.Wm)(W,{title:"选择资源",modelValue:g.resourceVisible,"onUpdate:modelValue":l[14]||(l[14]=e=>g.resourceVisible=e),width:1200,"destroy-on-close":""},{default:(0,a.w5)((()=>[(0,a.Wm)(x,{"select-num":1,onSelectedFiles:w.selectedFiles},null,8,["onSelectedFiles"])])),_:1},8,["modelValue"])],64)}var w=t(1686),b={emits:["success","closed"],components:{Attachment:w.Z},data(){return{mode:"add",titleMap:{add:"新增盲盒",edit:"编辑盲盒",show:"查看"},resourceVisible:!1,visible:!1,isSaveing:!1,form:{id:"",name:"",price:0,pic:"",desc:"",sort:1,hot_tag:2,recommend_tag:2},plusIcon:"el-icon-plus",deleteIcon:"el-icon-delete",rules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],price:[{required:!0,message:"请输入单抽价格",trigger:"blur"}],pic:[{required:!0,message:"请选择封面",trigger:"blur"}],sort:[{required:!0,message:"请输入排序",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"blur"}]}}},mounted(){},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},submit(){this.$refs.dialogForm.validate((async e=>{if(!e)return!1;var l;this.isSaveing=!0,l="add"==this.mode?await this.$API.blindbox.add.post(this.form):await this.$API.blindbox.edit.post(this.form),this.isSaveing=!1,0==l.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success(l.msg)):this.$message.error(l.msg)}))},removeIcon(){this.form.pic=""},showImage(){this.resourceVisible=!0},selectedFiles(e){this.form.pic=e[0].url,this.resourceVisible=!1},setData(e){this.form.id=e.id,this.form.name=e.name,this.form.price=e.price,this.form.pic=e.pic,this.form.desc=e.desc,this.form.sort=e.sort,this.form.hot_tag=e.hot_tag,this.form.recommend_tag=e.recommend_tag}}},_=t(3744);const y=(0,_.Z)(b,[["render",g],["__scopeId","data-v-46c1815e"]]);var v=y},4199:function(e,l,t){t.r(l),t.d(l,{default:function(){return r}});var a=t(6252);function o(e,l,t,o,i,s){const d=(0,a.up)("el-table-column"),r=(0,a.up)("el-image"),m=(0,a.up)("el-table"),n=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.j4)(n,{title:i.titleMap[i.mode],modelValue:i.visible,"onUpdate:modelValue":l[0]||(l[0]=e=>i.visible=e),width:800,"destroy-on-close":"",onClosed:l[1]||(l[1]=l=>e.$emit("closed")),"close-on-click-modal":!1},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{data:i.tableData,style:{width:"100%"}},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{prop:"reward.goods_id",label:"商品ID"}),(0,a.Wm)(d,{prop:"reward.goods_name",label:"商品名称"}),(0,a.Wm)(d,{label:"商品图片"},{default:(0,a.w5)((e=>[(0,a.Wm)(r,{src:e.row.reward.goods_image,style:{width:"80px",height:"auto"}},null,8,["src"])])),_:1})])),_:1},8,["data"])])),_:1},8,["title","modelValue"])}var i={name:"boxExchangeDetail",emits:["success","closed"],data(){return{mode:"detail",titleMap:{detail:"兑换详情"},visible:!1,tableData:[]}},mounted(){},methods:{open(e){return this.tableData=e,this.visible=!0,this}}},s=t(3744);const d=(0,s.Z)(i,[["render",o]]);var r=d},3875:function(e,l,t){t.r(l),t.d(l,{default:function(){return n}});var a=t(6252);const o=(0,a.Uk)("成功"),i=(0,a.Uk)("失败");function s(e,l,t,s,d,r){const m=(0,a.up)("el-button"),n=(0,a.up)("el-table-column"),u=(0,a.up)("el-tag"),c=(0,a.up)("el-table"),p=(0,a.up)("el-pagination"),h=(0,a.up)("el-dialog"),f=(0,a.Q2)("loading");return(0,a.wg)(),(0,a.j4)(h,{title:d.titleMap[d.mode],modelValue:d.visible,"onUpdate:modelValue":l[0]||(l[0]=e=>d.visible=e),width:1e3,"destroy-on-close":"",onClosed:l[1]||(l[1]=l=>e.$emit("closed"))},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{type:"primary",icon:"el-icon-refresh",size:"small",onClick:r.refresh},null,8,["onClick"]),(0,a.wy)(((0,a.wg)(),(0,a.j4)(c,{class:"tableClass",data:d.tableData,style:{width:"100%","margin-top":"20px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(n,{prop:"id",label:"ID"}),(0,a.Wm)(n,{prop:"return_var",label:"运行结果"},{default:(0,a.w5)((e=>[0==e.row.return_var?((0,a.wg)(),(0,a.j4)(u,{key:0,type:"success"},{default:(0,a.w5)((()=>[o])),_:1})):(0,a.kq)("",!0),1==e.row.return_var?((0,a.wg)(),(0,a.j4)(u,{key:1,type:"danger"},{default:(0,a.w5)((()=>[i])),_:1})):(0,a.kq)("",!0)])),_:1}),(0,a.Wm)(n,{prop:"command","show-overflow-tooltip":!0,label:"任务命令"}),(0,a.Wm)(n,{prop:"running_time",label:"运行耗时"}),(0,a.Wm)(n,{prop:"output","show-overflow-tooltip":!0,label:"输出结果"}),(0,a.Wm)(n,{prop:"create_time",label:"执行时间"})])),_:1},8,["data"])),[[f,d.loading]]),(0,a.Wm)(p,{background:"",layout:"->, prev, pager, next",onCurrentChange:r.handleLogCurrentChange,"page-size":d.logPage.limit,total:d.total,style:{"margin-top":"10px"}},null,8,["onCurrentChange","page-size","total"])])),_:1},8,["title","modelValue"])}var d={emits:["success","closed"],data(){return{mode:"add",titleMap:{add:"执行日志",show:"查看"},tableData:[],data:{},total:0,logPage:{page:1,limit:10},loading:!0,visible:!1}},mounted(){},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},setData(e){this.data=e,this.runLog()},async runLog(){let e=await this.$API.crontab.log.get(this.logPage);this.tableData=e.data.list,this.total=e.data.count,this.loading=!1},refresh(){this.loading=!0,this.logPage.page=1,this.runLog()},handleLogCurrentChange(e){this.logPage.page=e,this.runLog()}}},r=t(3744);const m=(0,r.Z)(d,[["render",s]]);var n=m},9864:function(e,l,t){t.r(l),t.d(l,{default:function(){return g}});var a=t(6252);const o=e=>((0,a.dD)("data-v-454df393"),e=e(),(0,a.Cn)(),e),i=o((()=>(0,a._)("div",{class:"frequency-title"},"定时规则",-1))),s=o((()=>(0,a._)("span",{class:"suffix"},"日",-1))),d=o((()=>(0,a._)("span",{class:"suffix"},"时",-1))),r=o((()=>(0,a._)("span",{class:"suffix"},"分",-1))),m=o((()=>(0,a._)("span",{class:"suffix"},"秒",-1))),n=(0,a.Uk)("取 消"),u=(0,a.Uk)("保 存");function c(e,l,t,o,c,p){const h=(0,a.up)("el-input"),f=(0,a.up)("el-form-item"),g=(0,a.up)("el-option"),w=(0,a.up)("el-select"),b=(0,a.up)("el-col"),_=(0,a.up)("el-input-number"),y=(0,a.up)("el-switch"),v=(0,a.up)("el-form"),V=(0,a.up)("el-button"),k=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.j4)(k,{title:c.titleMap[c.mode],modelValue:c.visible,"onUpdate:modelValue":l[12]||(l[12]=e=>c.visible=e),width:1e3,"destroy-on-close":"",onClosed:l[13]||(l[13]=l=>e.$emit("closed"))},{footer:(0,a.w5)((()=>[(0,a.Wm)(V,{onClick:l[10]||(l[10]=e=>c.visible=!1)},{default:(0,a.w5)((()=>[n])),_:1}),(0,a.Wm)(V,{type:"primary",loading:e.isSaving,onClick:l[11]||(l[11]=e=>p.submit())},{default:(0,a.w5)((()=>[u])),_:1},8,["loading"])])),default:(0,a.w5)((()=>[(0,a.Wm)(v,{model:c.form,rules:e.rules,ref:"dialogForm","label-width":"100px","label-position":"left"},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{label:"标题",prop:"title"},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{modelValue:c.form.title,"onUpdate:modelValue":l[0]||(l[0]=e=>c.form.title=e),placeholder:"计划任务标题",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(f,{label:"执行脚本",prop:"shell"},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{type:"textarea",modelValue:c.form.shell,"onUpdate:modelValue":l[1]||(l[1]=e=>c.form.shell=e),clearable:"",rows:3},null,8,["modelValue"])])),_:1}),(0,a.Wm)(f,{prop:"frequency"},{label:(0,a.w5)((()=>[i])),default:(0,a.w5)((()=>[(0,a.Wm)(b,{span:4},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{modelValue:c.form.frequency.type,"onUpdate:modelValue":l[2]||(l[2]=e=>c.form.frequency.type=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{label:"每隔N秒",value:"1"}),(0,a.Wm)(g,{label:"每隔N分钟",value:"2"}),(0,a.Wm)(g,{label:"每隔N小时",value:"3"}),(0,a.Wm)(g,{label:"每隔N天",value:"4"}),(0,a.Wm)(g,{label:"每天",value:"5"}),(0,a.Wm)(g,{label:"每星期",value:"6"}),(0,a.Wm)(g,{label:"每月",value:"7"})])),_:1},8,["modelValue"])])),_:1}),7==c.form.frequency.type||4==c.form.frequency.type?((0,a.wg)(),(0,a.j4)(b,{key:0,span:4,style:{"margin-left":"10px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{modelValue:c.form.frequency.day,"onUpdate:modelValue":l[3]||(l[3]=e=>c.form.frequency.day=e),"controls-position":"right",min:1,max:31,"suffix-icon":"el-icon-date"},null,8,["modelValue"]),s])),_:1})):(0,a.kq)("",!0),6==c.form.frequency.type?((0,a.wg)(),(0,a.j4)(b,{key:1,span:4,style:{"margin-left":"3px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{modelValue:c.form.frequency.week,"onUpdate:modelValue":l[4]||(l[4]=e=>c.form.frequency.week=e),placeholder:"星期"},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{label:"周一",value:"1"}),(0,a.Wm)(g,{label:"周二",value:"2"}),(0,a.Wm)(g,{label:"周三",value:"3"}),(0,a.Wm)(g,{label:"周四",value:"4"}),(0,a.Wm)(g,{label:"周五",value:"5"}),(0,a.Wm)(g,{label:"周六",value:"6"}),(0,a.Wm)(g,{label:"周日",value:"7"})])),_:1},8,["modelValue"])])),_:1})):(0,a.kq)("",!0),c.form.frequency.type>2&&4!=c.form.frequency.type?((0,a.wg)(),(0,a.j4)(b,{key:2,span:4,style:{"margin-left":"10px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{modelValue:c.form.frequency.hour,"onUpdate:modelValue":l[5]||(l[5]=e=>c.form.frequency.hour=e),"controls-position":"right",min:0,max:23,"suffix-icon":"el-icon-date"},null,8,["modelValue"]),d])),_:1})):(0,a.kq)("",!0),2==c.form.frequency.type||c.form.frequency.type>4?((0,a.wg)(),(0,a.j4)(b,{key:3,span:4,style:{"margin-left":"10px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{modelValue:c.form.frequency.minute,"onUpdate:modelValue":l[6]||(l[6]=e=>c.form.frequency.minute=e),"controls-position":"right",min:0,max:59,"suffix-icon":"el-icon-date"},null,8,["modelValue"]),r])),_:1})):(0,a.kq)("",!0),1==c.form.frequency.type||c.form.frequency.type>4?((0,a.wg)(),(0,a.j4)(b,{key:4,span:4,style:{"margin-left":"10px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{modelValue:c.form.frequency.second,"onUpdate:modelValue":l[7]||(l[7]=e=>c.form.frequency.second=e),"controls-position":"right",min:0,max:59,"suffix-icon":"el-icon-date"},null,8,["modelValue"]),m])),_:1})):(0,a.kq)("",!0)])),_:1}),(0,a.Wm)(f,{label:"排序"},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{modelValue:c.form.sort,"onUpdate:modelValue":l[8]||(l[8]=e=>c.form.sort=e),placeholder:"越大越前",clearable:"",type:"number"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(f,{label:"是否启用",prop:"status"},{default:(0,a.w5)((()=>[(0,a.Wm)(y,{modelValue:c.form.status,"onUpdate:modelValue":l[9]||(l[9]=e=>c.form.status=e),"active-value":"1","inactive-value":"0"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["title","modelValue"])}var p={emits:["success","closed"],data(){return{mode:"add",titleMap:{add:"新增定时任务",edit:"编辑定时任务",show:"查看"},form:{title:"",type:2,shell:"",frequency:{type:"1",day:"1",week:"1",hour:"1",minute:"1",second:"1"},status:0,sort:0},visible:!1,isSaveing:!1}},mounted(){},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},submit(){this.$refs.dialogForm.validate((async e=>{if(!e)return!1;var l;this.isSaveing=!0,l="add"==this.mode?await this.$API.crontab.addTask.post(this.form):await this.$API.crontab.editTask.post(this.form),this.isSaveing=!1,200==l.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success(l.msg)):this.$message.error(l.msg)}))},setData(e){console.log("设置数据",e)}}},h=t(3744);const f=(0,h.Z)(p,[["render",c],["__scopeId","data-v-454df393"]]);var g=f},6124:function(e,l,t){t.r(l),t.d(l,{default:function(){return c}});var a=t(6252);const o=(0,a.Uk)("正常"),i=(0,a.Uk)("禁用"),s=(0,a.Uk)("取 消"),d=(0,a.Uk)("保 存");function r(e,l,t,r,m,n){const u=(0,a.up)("el-input"),c=(0,a.up)("el-form-item"),p=(0,a.up)("el-radio"),h=(0,a.up)("el-form"),f=(0,a.up)("el-button"),g=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.j4)(g,{title:m.titleMap[m.mode],modelValue:m.visible,"onUpdate:modelValue":l[6]||(l[6]=e=>m.visible=e),width:600,"destroy-on-close":"",onClosed:l[7]||(l[7]=l=>e.$emit("closed")),"close-on-click-modal":!1},{footer:(0,a.w5)((()=>[(0,a.Wm)(f,{onClick:l[4]||(l[4]=e=>m.visible=!1)},{default:(0,a.w5)((()=>[s])),_:1}),"show"!==m.mode?((0,a.wg)(),(0,a.j4)(f,{key:0,type:"primary",loading:m.isSaveing,onClick:l[5]||(l[5]=e=>n.submit())},{default:(0,a.w5)((()=>[d])),_:1},8,["loading"])):(0,a.kq)("",!0)])),default:(0,a.w5)((()=>[(0,a.Wm)(h,{model:m.form,rules:m.rules,disabled:"show"===m.mode,ref:"dialogForm","label-width":"100px","label-position":"left"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{label:"物流公司名称",prop:"name"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{modelValue:m.form.name,"onUpdate:modelValue":l[0]||(l[0]=e=>m.form.name=e),placeholder:"物流公司名称",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(c,{label:"物流公司编码"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{modelValue:m.form.code,"onUpdate:modelValue":l[1]||(l[1]=e=>m.form.code=e),placeholder:"物流公司编码",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(c,{label:"状态",prop:"status"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{label:1,modelValue:m.form.status,"onUpdate:modelValue":l[2]||(l[2]=e=>m.form.status=e)},{default:(0,a.w5)((()=>[o])),_:1},8,["modelValue"]),(0,a.Wm)(p,{label:2,modelValue:m.form.status,"onUpdate:modelValue":l[3]||(l[3]=e=>m.form.status=e)},{default:(0,a.w5)((()=>[i])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules","disabled"])])),_:1},8,["title","modelValue"])}var m={name:"expressCorpSettingSave",emits:["success","closed"],data(){return{mode:"add",titleMap:{edit:"编辑物流公司",add:"添加物流公司"},visible:!1,isSaveing:!1,form:{id:"",name:"",code:"",status:1},rules:{nickname:[{required:!0,message:"请输入昵称",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"}],integral:[{required:!0,message:"请输入积分",trigger:"blur"}],balance:[{required:!0,message:"请输入余额",trigger:"blur"}]},roles:[]}},mounted(){},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},submit(){this.$refs.dialogForm.validate((async e=>{if(!e)return!1;var l;this.isSaveing=!0,l="add"==this.mode?await this.$API.expressCorpSetting.add.post(this.form):await this.$API.expressCorpSetting.edit.post(this.form),this.isSaveing=!1,0==l.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success(l.msg)):this.$message.error(l.msg)}))},setData(e){this.form.id=e.id,this.form.name=e.name,this.form.code=e.code,this.form.status=e.status}}},n=t(3744);const u=(0,n.Z)(m,[["render",r]]);var c=u},9912:function(e,l,t){t.r(l),t.d(l,{default:function(){return _}});var a=t(6252);const o=e=>((0,a.dD)("data-v-df608fe6"),e=e(),(0,a.Cn)(),e),i={class:"img-list"},s={key:0},d=["src"],r={class:"img-tools"},m=o((()=>(0,a._)("li",{style:{color:"#999","font-size":"12px",width:"250px","line-height":"58px","margin-left":"30px"}}," 建议尺寸：64*64 ",-1))),n=(0,a.Uk)("显示"),u=(0,a.Uk)("隐藏"),c=(0,a.Uk)("取 消"),p=(0,a.Uk)("保 存");function h(e,l,t,o,h,f){const g=(0,a.up)("el-input"),w=(0,a.up)("el-form-item"),b=(0,a.up)("el-icon"),_=(0,a.up)("el-radio"),y=(0,a.up)("el-form"),v=(0,a.up)("el-button"),V=(0,a.up)("el-dialog"),k=(0,a.up)("Attachment");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(V,{title:h.titleMap[h.mode],modelValue:h.visible,"onUpdate:modelValue":l[9]||(l[9]=e=>h.visible=e),width:600,"destroy-on-close":"",onClosed:l[10]||(l[10]=l=>e.$emit("closed")),"close-on-click-modal":!1},{footer:(0,a.w5)((()=>[(0,a.Wm)(v,{onClick:l[7]||(l[7]=e=>h.visible=!1)},{default:(0,a.w5)((()=>[c])),_:1}),"show"!=h.mode?((0,a.wg)(),(0,a.j4)(v,{key:0,type:"primary",loading:h.isSaveing,onClick:l[8]||(l[8]=e=>f.submit())},{default:(0,a.w5)((()=>[p])),_:1},8,["loading"])):(0,a.kq)("",!0)])),default:(0,a.w5)((()=>[(0,a.Wm)(y,{model:h.form,rules:h.rules,disabled:"show"==h.mode,ref:"dialogForm","label-width":"100px","label-position":"left"},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{label:"上级分类"},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{modelValue:h.pname,"onUpdate:modelValue":l[0]||(l[0]=e=>h.pname=e),disabled:"true"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(w,{label:"分类名称",prop:"name"},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{modelValue:h.form.name,"onUpdate:modelValue":l[1]||(l[1]=e=>h.form.name=e),clearable:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(w,{label:"图标",prop:"icon"},{default:(0,a.w5)((()=>[(0,a._)("ul",i,[h.form.icon?((0,a.wg)(),(0,a.iD)("li",s,[(0,a._)("img",{src:h.form.icon,alt:"图片",style:{height:"58px",width:"58px"}},null,8,d),(0,a._)("div",r,[(0,a.Wm)(b,{style:{"font-size":"14px",color:"#fff"},onClick:l[2]||(l[2]=e=>f.removeIcon())},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)(h.deleteIcon)))])),_:1})])])):(0,a.kq)("",!0),(0,a._)("li",null,[(0,a._)("div",{class:"addImg",onClick:l[3]||(l[3]=(...e)=>f.showImage&&f.showImage(...e))},[(0,a.Wm)(b,null,{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)(h.plusIcon)))])),_:1})])]),m])])),_:1}),(0,a.Wm)(w,{label:"排序",prop:"sort"},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{type:"number",modelValue:h.form.sort,"onUpdate:modelValue":l[4]||(l[4]=e=>h.form.sort=e),clearable:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(w,{label:"是否显示",prop:"status"},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{label:1,modelValue:h.form.status,"onUpdate:modelValue":l[5]||(l[5]=e=>h.form.status=e)},{default:(0,a.w5)((()=>[n])),_:1},8,["modelValue"]),(0,a.Wm)(_,{label:2,modelValue:h.form.status,"onUpdate:modelValue":l[6]||(l[6]=e=>h.form.status=e)},{default:(0,a.w5)((()=>[u])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules","disabled"])])),_:1},8,["title","modelValue"]),(0,a.Wm)(V,{title:"选择资源",modelValue:h.resourceVisible,"onUpdate:modelValue":l[11]||(l[11]=e=>h.resourceVisible=e),width:1200,"destroy-on-close":""},{default:(0,a.w5)((()=>[(0,a.Wm)(k,{"select-num":1,onSelectedFiles:f.selectedFiles},null,8,["onSelectedFiles"])])),_:1},8,["modelValue"])],64)}var f=t(1686),g={emits:["success","closed"],components:{Attachment:f.Z},data(){return{mode:"add",titleMap:{add:"新增分类",edit:"编辑分类",show:"查看"},resourceVisible:!1,visible:!1,isSaveing:!1,pname:"顶级分类",form:{id:"",pid:0,name:"",icon:"",sort:1,status:1},plusIcon:"el-icon-plus",deleteIcon:"el-icon-delete",rules:{name:[{required:!0,message:"请输入分类名称",trigger:"blur"}],icon:[{required:!0,message:"请输选择图标",trigger:"blur"}],sort:[{required:!0,message:"请输入排序",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"blur"}]}}},mounted(){},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},submit(){this.$refs.dialogForm.validate((async e=>{if(!e)return!1;var l;this.isSaveing=!0,l="add"==this.mode?await this.$API.goodsCate.add.post(this.form):await this.$API.goodsCate.edit.post(this.form),this.isSaveing=!1,0==l.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success(l.msg)):this.$message.error(l.msg)}))},removeIcon(){this.form.icon=""},showImage(){this.resourceVisible=!0},selectedFiles(e){this.form.icon=e[0].url,this.resourceVisible=!1},setData(e){this.form.id=e.id,this.form.pid=e.pid,this.form.name=e.name,this.form.icon=e.icon,this.form.sort=e.sort,this.form.status=e.status},setParentData(e){this.form.pid=e.id,this.pname=e.name}}},w=t(3744);const b=(0,w.Z)(g,[["render",h],["__scopeId","data-v-df608fe6"]]);var _=b},840:function(e,l,t){t.r(l),t.d(l,{default:function(){return ae}});var a=t(6252),o=t(3577);const i=e=>((0,a.dD)("data-v-17564e9f"),e=e(),(0,a.Cn)(),e),s={class:"goods-type",style:{height:"100%"}},d=i((()=>(0,a._)("div",{style:{"margin-top":"5%"}},"普通商品",-1))),r={style:{color:"#999","font-size":"12px",height:"24px"}},m=i((()=>(0,a._)("span",{class:"icon"},null,-1))),n=i((()=>(0,a._)("div",{style:{"margin-top":"5%"}},"盲盒商品",-1))),u={style:{color:"#999","font-size":"12px",height:"24px"}},c=i((()=>(0,a._)("span",{class:"icon"},null,-1))),p={class:"img-list"},h=["src"],f={class:"img-tools"},g=i((()=>(0,a._)("p",{style:{"margin-left":"100px",color:"#909399"}},"* 建议尺寸：336*336, 最多选择 8 张",-1))),w=(0,a.Uk)("上架"),b=(0,a.Uk)("下架"),_=(0,a.Uk)("下一步"),y=(0,a.Uk)("保存"),v=(0,a.Uk)("单规格"),V=(0,a.Uk)("多规格"),k={key:1},W=(0,a.Uk)(),x=i((()=>(0,a._)("span",{style:{color:"#F56C6C","font-size":"12px","margin-left":"10px"}},"(-1 表示无限库存)",-1))),U={key:2,style:{"margin-bottom":"20px"}},C={style:{float:"right","margin-bottom":"10px",width:"1200px"}},I=(0,a.Uk)("新的规格"),$=(0,a.Uk)("生成属性"),S={style:{display:"flex","flex-flow":"row wrap"}},D=["onClick"],F=(0,a.Uk)(" 添加 "),q={key:3,style:{"margin-bottom":"20px"}},P=(0,a.Uk)("图片"),z=(0,a.Uk)("展示价格"),A=(0,a.Uk)("兑换价格"),j=(0,a.Uk)("成本价"),L=(0,a.Uk)("积分价格"),M=(0,a.Uk)("库存"),N=["onClick"],T=["src"],G=["onClick"],Z=(0,a.Uk)("删除"),R=(0,a.Uk)("上一步"),O=(0,a.Uk)("下一步"),E=(0,a.Uk)("保存"),H=(0,a.Uk)("上一步"),B=(0,a.Uk)("保存"),Y={class:"dialog-footer"},K=(0,a.Uk)("确 定");function J(e,l,t,i,J,Q){const X=(0,a.up)("el-icon-Goods"),ee=(0,a.up)("el-icon"),le=(0,a.up)("el-icon-Box"),te=(0,a.up)("el-form-item"),ae=(0,a.up)("el-cascader"),oe=(0,a.up)("el-input"),ie=(0,a.up)("el-radio"),se=(0,a.up)("el-button"),de=(0,a.up)("el-form"),re=(0,a.up)("el-tab-pane"),me=(0,a.up)("el-icon-delete"),ne=(0,a.up)("el-table-column"),ue=(0,a.up)("el-icon-plus"),ce=(0,a.up)("el-table"),pe=(0,a.up)("el-button-group"),he=(0,a.up)("sc-editor"),fe=(0,a.up)("el-tabs"),ge=(0,a.up)("Attachment"),we=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(fe,{modelValue:J.activeName,"onUpdate:modelValue":l[24]||(l[24]=e=>J.activeName=e),class:"demo-tabs"},{default:(0,a.w5)((()=>[(0,a.Wm)(re,{label:"基础信息",name:"1"},{default:(0,a.w5)((()=>[(0,a.Wm)(de,{model:J.form,"label-width":"100px",rules:J.rules,ref:"ruleForm"},{default:(0,a.w5)((()=>[(0,a.Wm)(te,{label:"商品类型",prop:"goods_type",class:"goods-type"},{default:(0,a.w5)((()=>[(0,a._)("ul",s,[(0,a._)("li",{class:(0,o.C_)({"goods-type-active":1==J.form.goods_type}),onClick:l[0]||(l[0]=e=>Q.checkType(1))},[d,(0,a._)("div",r,[(0,a.Wm)(ee,{style:{"font-size":"18px",color:"#F56C6C","margin-top":"5px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(X)])),_:1})]),m],2),(0,a._)("li",{class:(0,o.C_)({"goods-type-active":2==J.form.goods_type}),onClick:l[1]||(l[1]=e=>Q.checkType(2)),style:{"margin-left":"10px"}},[n,(0,a._)("div",u,[(0,a.Wm)(ee,{style:{"font-size":"18px",color:"#67C23A","margin-top":"5px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(le)])),_:1})]),c],2)])])),_:1}),(0,a.Wm)(te,{label:"所属分类",prop:"cateId"},{default:(0,a.w5)((()=>[(0,a.Wm)(ae,{modelValue:J.cateId,"onUpdate:modelValue":l[2]||(l[2]=e=>J.cateId=e),options:J.cate,"show-all-levels":!1,props:J.treeProps,style:{width:"500px"},clearable:""},null,8,["modelValue","options","props"])])),_:1}),(0,a.Wm)(te,{label:"商品名称",prop:"name"},{default:(0,a.w5)((()=>[(0,a.Wm)(oe,{modelValue:J.form.name,"onUpdate:modelValue":l[3]||(l[3]=e=>J.form.name=e),style:{width:"500px"}},null,8,["modelValue"])])),_:1}),(0,a.Wm)(te,{label:"商品副标题"},{default:(0,a.w5)((()=>[(0,a.Wm)(oe,{modelValue:J.form.sub_title,"onUpdate:modelValue":l[4]||(l[4]=e=>J.form.sub_title=e),style:{width:"500px"}},null,8,["modelValue"])])),_:1}),(0,a.Wm)(te,{label:"商品主图",prop:"image",style:{"margin-bottom":"5px"}},{default:(0,a.w5)((()=>[(0,a._)("ul",p,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(J.goodsImages,((e,l)=>((0,a.wg)(),(0,a.iD)("li",{key:l},[(0,a._)("img",{src:e,alt:"图片",style:{height:"58px",width:"58px"}},null,8,h),(0,a._)("div",f,[(0,a.Wm)(ee,{style:{"font-size":"14px",color:"#fff"},onClick:e=>Q.removeIcon(l)},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)(J.deleteIcon)))])),_:2},1032,["onClick"])])])))),128)),(0,a._)("li",null,[(0,a._)("div",{class:"addImg",onClick:l[5]||(l[5]=(...e)=>Q.showImage&&Q.showImage(...e))},[(0,a.Wm)(ee,null,{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)(J.plusIcon)))])),_:1})])])])])),_:1}),g,(0,a.Wm)(te,{label:"状态",style:{"margin-top":"10px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(ie,{modelValue:J.form.status,"onUpdate:modelValue":l[6]||(l[6]=e=>J.form.status=e),label:"1"},{default:(0,a.w5)((()=>[w])),_:1},8,["modelValue"]),(0,a.Wm)(ie,{modelValue:J.form.status,"onUpdate:modelValue":l[7]||(l[7]=e=>J.form.status=e),label:"2"},{default:(0,a.w5)((()=>[b])),_:1},8,["modelValue"])])),_:1}),(0,a.Wm)(te,{label:"运费",prop:"delivery_fee"},{default:(0,a.w5)((()=>[(0,a.Wm)(oe,{modelValue:J.form.delivery_fee,"onUpdate:modelValue":l[8]||(l[8]=e=>J.form.delivery_fee=e),style:{width:"500px"},type:"number"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(te,{label:"排序"},{default:(0,a.w5)((()=>[(0,a.Wm)(oe,{modelValue:J.form.sort,"onUpdate:modelValue":l[9]||(l[9]=e=>J.form.sort=e),style:{width:"500px"},type:"number",placeholder:"值越大越靠前"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(te,null,{default:(0,a.w5)((()=>[(0,a.Wm)(se,{type:"primary",onClick:Q.nextStep},{default:(0,a.w5)((()=>[_])),_:1},8,["onClick"]),"edit"==J.mode?((0,a.wg)(),(0,a.j4)(se,{key:0,type:"primary",onClick:Q.saveGoods},{default:(0,a.w5)((()=>[y])),_:1},8,["onClick"])):(0,a.kq)("",!0)])),_:1})])),_:1},8,["model","rules"])])),_:1}),(0,a.Wm)(re,{label:"规格库存",name:"2"},{default:(0,a.w5)((()=>[(0,a.Wm)(de,{model:J.form,"label-width":"100px",rules:J.rules,ref:"ruleForm"},{default:(0,a.w5)((()=>[1==J.form.goods_type?((0,a.wg)(),(0,a.j4)(te,{key:0,label:"商品规格",style:{"margin-top":"10px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(ie,{modelValue:J.form.type,"onUpdate:modelValue":l[10]||(l[10]=e=>J.form.type=e),label:"1"},{default:(0,a.w5)((()=>[v])),_:1},8,["modelValue"]),(0,a.Wm)(ie,{modelValue:J.form.type,"onUpdate:modelValue":l[11]||(l[11]=e=>J.form.type=e),label:"2"},{default:(0,a.w5)((()=>[V])),_:1},8,["modelValue"])])),_:1})):(0,a.kq)("",!0),1==J.form.type?((0,a.wg)(),(0,a.iD)("div",k,[(0,a.Wm)(te,{label:"展示价格"},{default:(0,a.w5)((()=>[(0,a.Wm)(oe,{modelValue:J.form.price,"onUpdate:modelValue":l[12]||(l[12]=e=>J.form.price=e),style:{width:"500px"},type:"number"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(te,{label:"兑换价格"},{default:(0,a.w5)((()=>[(0,a.Wm)(oe,{modelValue:J.form.recovery_price,"onUpdate:modelValue":l[13]||(l[13]=e=>J.form.recovery_price=e),style:{width:"500px"},type:"number"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(te,{label:"成本价"},{default:(0,a.w5)((()=>[(0,a.Wm)(oe,{modelValue:J.form.cost_price,"onUpdate:modelValue":l[14]||(l[14]=e=>J.form.cost_price=e),style:{width:"500px"},type:"number"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(te,{label:"积分价格"},{default:(0,a.w5)((()=>[(0,a.Wm)(oe,{modelValue:J.form.integral_price,"onUpdate:modelValue":l[15]||(l[15]=e=>J.form.integral_price=e),style:{width:"500px"},type:"number"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(te,{label:"库存"},{default:(0,a.w5)((()=>[(0,a.Wm)(oe,{modelValue:J.form.stock,"onUpdate:modelValue":l[16]||(l[16]=e=>J.form.stock=e),style:{width:"500px"},type:"number"},null,8,["modelValue"]),W,x])),_:1})])):(0,a.kq)("",!0),2==J.form.type?((0,a.wg)(),(0,a.iD)("div",U,[(0,a._)("div",C,[(0,a.Wm)(se,{type:"primary",icon:"el-icon-plus",size:"small",onClick:Q.addRule},{default:(0,a.w5)((()=>[I])),_:1},8,["onClick"]),(0,a.Wm)(se,{type:"primary",icon:"el-icon-cpu",size:"small",onClick:Q.makeRule},{default:(0,a.w5)((()=>[$])),_:1},8,["onClick"])]),(0,a.Wm)(ce,{data:J.preItem,border:"",style:{width:"1200px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(ne,{label:"规格名",width:"200"},{default:(0,a.w5)((e=>[(0,a.Wm)(oe,{placeholder:"规格名",style:{width:"150px"},modelValue:e.row.title,"onUpdate:modelValue":l=>e.row.title=l},null,8,["modelValue","onUpdate:modelValue"]),(0,a.Wm)(ee,{onClick:l=>Q.delTitle(e.$index),class:"del-btn"},{default:(0,a.w5)((()=>[(0,a.Wm)(me)])),_:2},1032,["onClick"])])),_:1}),(0,a.Wm)(ne,{label:"规格值"},{default:(0,a.w5)((e=>[(0,a._)("div",S,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.row.item,((l,t)=>((0,a.wg)(),(0,a.iD)("div",{style:{width:"180px",float:"left","margin-top":"5px"},key:t},[(0,a.Wm)(oe,{placeholder:"规格值",style:{width:"150px"},modelValue:e.row.item[t],"onUpdate:modelValue":l=>e.row.item[t]=l},null,8,["modelValue","onUpdate:modelValue"]),(0,a.Wm)(ee,{onClick:l=>Q.delItem(e.$index,t),class:"del-btn"},{default:(0,a.w5)((()=>[(0,a.Wm)(me)])),_:2},1032,["onClick"])])))),128)),(0,a._)("div",{class:"item-tool",onClick:l=>Q.addNewItem(e.$index)},[(0,a.Wm)(ee,null,{default:(0,a.w5)((()=>[(0,a.Wm)(ue)])),_:1}),F],8,D)])])),_:1})])),_:1},8,["data"])])):(0,a.kq)("",!0),J.final.length>0?((0,a.wg)(),(0,a.iD)("div",q,[(0,a.Wm)(te,{label:"批量设置",style:{"margin-top":"10px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(pe,null,{default:(0,a.w5)((()=>[(0,a.Wm)(se,{type:"primary",size:"small",onClick:l[17]||(l[17]=e=>J.batchDialogVisible=!0)},{default:(0,a.w5)((()=>[P])),_:1}),(0,a.Wm)(se,{type:"primary",size:"small",onClick:l[18]||(l[18]=e=>Q.setBatch("price","展示价格"))},{default:(0,a.w5)((()=>[z])),_:1}),(0,a.Wm)(se,{type:"primary",size:"small",onClick:l[19]||(l[19]=e=>Q.setBatch("recovery_price","兑换价格"))},{default:(0,a.w5)((()=>[A])),_:1}),(0,a.Wm)(se,{type:"primary",size:"small",onClick:l[20]||(l[20]=e=>Q.setBatch("cost_price","成本价"))},{default:(0,a.w5)((()=>[j])),_:1}),(0,a.Wm)(se,{type:"primary",size:"small",onClick:l[21]||(l[21]=e=>Q.setBatch("integral_price","积分价格"))},{default:(0,a.w5)((()=>[L])),_:1}),(0,a.Wm)(se,{type:"primary",size:"small",onClick:l[22]||(l[22]=e=>Q.setBatch("stock","库存"))},{default:(0,a.w5)((()=>[M])),_:1})])),_:1})])),_:1}),(0,a.Wm)(ce,{data:J.final,border:"",style:{width:"1200px"}},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(J.tableHead,((e,l)=>((0,a.wg)(),(0,a.j4)(ne,{label:e.label,width:"150",key:l},{default:(0,a.w5)((l=>[(0,a.Uk)((0,o.zw)(l.row.sku[e.property]),1)])),_:2},1032,["label"])))),128)),(0,a.Wm)(ne,{label:"图片",width:"100"},{default:(0,a.w5)((e=>[""==e.row.image?((0,a.wg)(),(0,a.iD)("div",{key:0,class:"up-item-img",onClick:l=>Q.setOneImg(e.$index)},[(0,a.Wm)(ee,null,{default:(0,a.w5)((()=>[(0,a.Wm)(ue)])),_:1})],8,N)):(0,a.kq)("",!0),e.row.image?((0,a.wg)(),(0,a.iD)("img",{key:1,style:{width:"40px",height:"40px"},src:e.row.image},null,8,T)):(0,a.kq)("",!0),e.row.image?((0,a.wg)(),(0,a.iD)("div",{key:2,class:"img-tools",onClick:l=>Q.rmImg(e.$index)},[(0,a.Wm)(ee,{style:{color:"#fff"}},{default:(0,a.w5)((()=>[(0,a.Wm)(me)])),_:1})],8,G)):(0,a.kq)("",!0)])),_:1}),(0,a.Wm)(ne,{label:"展示价格",width:"150"},{default:(0,a.w5)((e=>[(0,a.Wm)(oe,{modelValue:e.row.price,"onUpdate:modelValue":l=>e.row.price=l,type:"number"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,a.Wm)(ne,{label:"兑换价格",width:"150"},{default:(0,a.w5)((e=>[(0,a.Wm)(oe,{modelValue:e.row.recovery_price,"onUpdate:modelValue":l=>e.row.recovery_price=l,type:"number"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,a.Wm)(ne,{label:"成本价",width:"150"},{default:(0,a.w5)((e=>[(0,a.Wm)(oe,{modelValue:e.row.cost_price,"onUpdate:modelValue":l=>e.row.cost_price=l,type:"number"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,a.Wm)(ne,{label:"积分价格",width:"150"},{default:(0,a.w5)((e=>[(0,a.Wm)(oe,{modelValue:e.row.integral_price,"onUpdate:modelValue":l=>e.row.integral_price=l,type:"number"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,a.Wm)(ne,{label:"库存",width:"150"},{default:(0,a.w5)((e=>[(0,a.Wm)(oe,{modelValue:e.row.stock,"onUpdate:modelValue":l=>e.row.stock=l,type:"number"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,a.Wm)(ne,{label:"操作",fixed:"right",width:"150"},{default:(0,a.w5)((e=>[(0,a.Wm)(se,{onClick:l=>Q.handleDel(e.$index),type:"text",size:"small"},{default:(0,a.w5)((()=>[Z])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])])):(0,a.kq)("",!0),(0,a.Wm)(te,null,{default:(0,a.w5)((()=>[(0,a.Wm)(se,{onClick:Q.preStep},{default:(0,a.w5)((()=>[R])),_:1},8,["onClick"]),(0,a.Wm)(se,{type:"primary",onClick:Q.ruleNext},{default:(0,a.w5)((()=>[O])),_:1},8,["onClick"]),"edit"==J.mode?((0,a.wg)(),(0,a.j4)(se,{key:0,type:"primary",onClick:Q.saveGoods},{default:(0,a.w5)((()=>[E])),_:1},8,["onClick"])):(0,a.kq)("",!0)])),_:1})])),_:1},8,["model","rules"])])),_:1}),(0,a.Wm)(re,{label:"商品详情",name:"3"},{default:(0,a.w5)((()=>[(0,a.Wm)(he,{modelValue:J.form.content,"onUpdate:modelValue":l[23]||(l[23]=e=>J.form.content=e),height:600},null,8,["modelValue"]),(0,a.Wm)(de,{model:J.form,"label-width":"100px",style:{"margin-top":"20px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(te,null,{default:(0,a.w5)((()=>[(0,a.Wm)(se,{onClick:Q.preStep},{default:(0,a.w5)((()=>[H])),_:1},8,["onClick"]),(0,a.Wm)(se,{type:"primary",onClick:Q.saveGoods},{default:(0,a.w5)((()=>[B])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])])),_:1})])),_:1},8,["modelValue"]),(0,a.Wm)(we,{title:"选择资源",modelValue:J.imgResourceVisible,"onUpdate:modelValue":l[25]||(l[25]=e=>J.imgResourceVisible=e),width:1200,"destroy-on-close":""},{default:(0,a.w5)((()=>[(0,a.Wm)(ge,{"select-num":8,onSelectedFiles:Q.selectedFiles},null,8,["onSelectedFiles"])])),_:1},8,["modelValue"]),(0,a.Wm)(we,{title:"选择资源",modelValue:J.batchDialogVisible,"onUpdate:modelValue":l[26]||(l[26]=e=>J.batchDialogVisible=e),width:1200,"destroy-on-close":""},{default:(0,a.w5)((()=>[(0,a.Wm)(ge,{"select-num":1,onSelectedFiles:Q.selectedBatchImg},null,8,["onSelectedFiles"])])),_:1},8,["modelValue"]),(0,a.Wm)(we,{title:`设置${J.batchTitle}`,modelValue:J.batchVisible,"onUpdate:modelValue":l[28]||(l[28]=e=>J.batchVisible=e),width:"400px"},{footer:(0,a.w5)((()=>[(0,a._)("span",Y,[(0,a.Wm)(se,{type:"primary",onClick:Q.batchFormSubmit},{default:(0,a.w5)((()=>[K])),_:1},8,["onClick"])])])),default:(0,a.w5)((()=>[(0,a.Wm)(de,{ref:"form",model:J.batchForm,"label-width":"80px"},{default:(0,a.w5)((()=>[(0,a.Wm)(te,{label:J.batchTitle},{default:(0,a.w5)((()=>[(0,a.Wm)(oe,{modelValue:J.batchForm.field,"onUpdate:modelValue":l[27]||(l[27]=e=>J.batchForm.field=e),type:"number"},null,8,["modelValue"])])),_:1},8,["label"])])),_:1},8,["model"])])),_:1},8,["title","modelValue"])],64)}t(7658);var Q=t(1686);const X=(0,a.RC)((()=>Promise.all([t.e(8285),t.e(6054),t.e(6325)]).then(t.bind(t,6127))));var ee={name:"goodsAdd",components:{Attachment:Q.Z,scEditor:X},data(){return{activeName:"1",imgResourceVisible:!1,dialogVisible:!1,cateId:[],goodsImages:[],plusIcon:"el-icon-plus",deleteIcon:"el-icon-delete",ruleItem:{title:"",item:[""]},form:{goods_type:1,name:"",cate_id:"",sub_title:"",image:"",status:"1",delivery_fee:0,sort:0,type:"1",price:"0.00",recovery_price:"0.00",cost_price:"0.00",integral_price:"0.00",stock:-1},cate:[],treeProps:{value:"id",label:"name",children:"children",checkStrictly:!0},rules:{goods_type:[{required:!0,message:"请选择商品类型",trigger:"blur"}],name:[{required:!0,message:"请输入商品名",trigger:"blur"}],cateId:[{required:!0,message:"请选择所属分类",trigger:"blur"}],image:[{required:!0,message:"请选择商品主图",trigger:"blur"}],delivery_fee:[{required:!0,message:"请设置运费",trigger:"blur"}]},preItem:[{title:"",item:[""]}],final:[],tableHead:[],ruleTableItem:{sku:[],image:"",recovery_price:"0.00",cost_price:"0.00",integral_price:"0.00",stock:0},batchDialogVisible:!1,batchTitle:"",batchVisible:!1,setField:"",batchForm:{field:""},selectImgIndex:-1,mode:"add"}},mounted(){this.getGoodsCate()},methods:{checkType(e){this.form.goods_type=e},async getGoodsCate(){let e=await this.$API.goodsCate.list.get();this.cate=e.data},removeIcon(e){this.goodsImages.splice(e,1)},selectedFiles(e){this.goodsImages=[],e.forEach((e=>{this.goodsImages.push(e.url)})),this.imgResourceVisible=!1},showImage(){this.imgResourceVisible=!0},nextStep(){this.activeName=parseInt(this.activeName)+1+""},preStep(){this.activeName=parseInt(this.activeName)-1+""},addRule(){let e=JSON.parse(JSON.stringify(this.ruleItem));this.preItem.push(e)},makeRule(){let e=[],l=[];this.preItem.forEach(((t,a)=>{let o=t.item.filter((function(e){return e&&e.trim()}));""!=t.title&&o.length>0&&(e.push({label:t.title,property:a}),l.push(t.item))}));let t=this.calcDescartes(l);this.final=[],this.ruleTableItem={sku:[],image:"",price:"0.00",recovery_price:"0.00",cost_price:"0.00",integral_price:"0.00",stock:0},t.forEach((e=>{if(e instanceof Array){let l=e.length;if(e.forEach(((l,t)=>{l||e.splice(t,1)})),l!=e.length)return}else if(""==e)return;this.ruleTableItem.sku=e instanceof Array?e:[e];let l=JSON.parse(JSON.stringify(this.ruleTableItem));this.final.push(l)})),this.tableHead=e},delTitle(e){this.preItem.splice(e,1)},delItem(e,l){this.preItem[e].item.splice(l,1)},addNewItem(e){this.preItem[e].item.push("")},calcDescartes(e){return e.length<2?e[0]||[]:e.reduce(((e,l)=>{let t=[];return e.forEach((e=>{l.forEach((l=>{e instanceof Array?t.push([...e,l]):t.push([e,l])}))})),t}))},setBatch(e,l){this.batchTitle=l,this.batchVisible=!0,this.setField=e},batchFormSubmit(){if(""==this.batchForm.field)return this.$message.error("请输入正确的值"),!1;this.final.map((e=>{"stock"!=this.setField&&"spu"!=this.setField?e[this.setField]=Number(this.batchForm.field).toFixed(2):e[this.setField]=this.batchForm.field})),this.batchForm.field="",this.batchVisible=!1},selectedBatchImg(e){parseInt(this.selectImgIndex)>=0?(this.final[parseInt(this.selectImgIndex)].image=e[0].url,this.selectImgIndex=-1):this.final.map((l=>{l.image=e[0].url})),this.batchDialogVisible=!1},setOneImg(e){this.batchDialogVisible=!0,this.selectImgIndex=e},rmImg(e){this.final[parseInt(e)].image=""},ruleNext(){if(2==this.form.type&&0==this.final.length)return this.$message.error("请生成多规格属性！"),!1;this.activeName=parseInt(this.activeName)+1+""},async saveGoods(){let e;this.cateId instanceof Array?this.form.cate_id=this.cateId[this.cateId.length-1]:this.form.cate_id=this.cateId,this.form.preItem=this.preItem,this.form.final=this.final,this.form.image=this.goodsImages.join(","),e="edit"==this.mode?await this.$API.goods.edit.post(this.form):await this.$API.goods.add.post(this.form),0==e.code?(this.$message.success("操作成功"),this.$emit("save")):this.$message.error(e.msg)},handleDel(e){this.final.splice(e,1)},ueditorContent(e){this.form.content=e},setMode(e){return this.mode=e,this},setData(e){if(this.form.id=e.id,this.form.goods_type=e.goods_type,this.form.name=e.name,this.sub_title=e.sub_title,this.form.image=e.image,this.form.status=e.status+"",this.form.delivery_fee=e.delivery_fee,this.form.sort=e.sort,this.form.type=e.type+"",this.form.price=e.price,this.form.recovery_price=e.recovery_price,this.form.cost_price=e.cost_price,this.form.integral_price=e.integral_price,this.form.stock=e.stock,this.form.content=e.content,this.cateId=e.cate_id,this.goodsImages=e.image.split(","),e.rule&&(this.preItem=JSON.parse(e.rule.rule)),e.ruleExtend){let l=[];this.preItem.forEach(((e,t)=>{let a=e.item.filter((function(e){return e&&e.trim()}));""!=e.title&&a.length>0&&l.push({label:e.title,property:t})})),this.tableHead=l,e.ruleExtend.map((e=>{if(!(e.sku instanceof Array))return e.sku=e.sku.split("※")})),this.final=e.ruleExtend}}}},le=t(3744);const te=(0,le.Z)(ee,[["render",J],["__scopeId","data-v-17564e9f"]]);var ae=te},168:function(e,l,t){t.r(l),t.d(l,{default:function(){return n}});var a=t(6252);const o=(0,a.Uk)("取 消"),i=(0,a.Uk)("确认发货");function s(e,l,t,s,d,r){const m=(0,a.up)("el-option"),n=(0,a.up)("el-select"),u=(0,a.up)("el-form-item"),c=(0,a.up)("el-input"),p=(0,a.up)("el-form"),h=(0,a.up)("el-button"),f=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.j4)(f,{title:d.titleMap[d.mode],modelValue:d.visible,"onUpdate:modelValue":l[5]||(l[5]=e=>d.visible=e),width:600,"destroy-on-close":"",onClosed:l[6]||(l[6]=l=>e.$emit("closed")),"close-on-click-modal":!1},{footer:(0,a.w5)((()=>[(0,a.Wm)(h,{onClick:l[3]||(l[3]=e=>d.visible=!1)},{default:(0,a.w5)((()=>[o])),_:1}),"show"!==d.mode?((0,a.wg)(),(0,a.j4)(h,{key:0,type:"primary",loading:d.isSaveing,onClick:l[4]||(l[4]=e=>r.submit())},{default:(0,a.w5)((()=>[i])),_:1},8,["loading"])):(0,a.kq)("",!0)])),default:(0,a.w5)((()=>[(0,a.Wm)(p,{model:d.form,rules:d.rules,disabled:"show"===d.mode,ref:"dialogForm","label-width":"120px"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{label:"物流公司名称",prop:"express_name"},{default:(0,a.w5)((()=>[(0,a.Wm)(n,{modelValue:d.form.express_name,"onUpdate:modelValue":l[0]||(l[0]=e=>d.form.express_name=e),onChange:r.expressChange,style:{width:"100%"}},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(d.expressList,((e,l)=>((0,a.wg)(),(0,a.j4)(m,{key:l,label:e.name,value:e.name},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1}),(0,a.Wm)(u,{label:"物流公司编码",prop:"express_code"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{modelValue:d.form.express_code,"onUpdate:modelValue":l[1]||(l[1]=e=>d.form.express_code=e),disabled:"",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(u,{label:"物流单号",prop:"express_no"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{modelValue:d.form.express_no,"onUpdate:modelValue":l[2]||(l[2]=e=>d.form.express_no=e),placeholder:"物流单号",clearable:""},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules","disabled"])])),_:1},8,["title","modelValue"])}var d={name:"integralOrderDelivery",emits:["success","closed"],data(){return{mode:"delivery",titleMap:{delivery:"发货"},expressList:[],visible:!1,isSaveing:!1,form:{order_id:"",user_id:"",express_name:"",express_code:"",express_no:""},deleteIcon:"el-icon-delete",rules:{express_name:[{required:!0,message:"请选择物流公司名称",trigger:"blur"}],express_code:[{required:!0,message:"请选择物流公司名称",trigger:"blur"}],express_no:[{required:!0,message:"请输入物流单号",trigger:"blur"}]}}},mounted(){this.getExpressList()},methods:{open(e){return this.form.order_id=e.id,this.form.user_id=e.user_id,this.visible=!0,this},async getExpressList(){let e=await this.$API.integralOrder.expressList.get();this.expressList=e.data.data},expressChange(e){this.expressList.forEach((l=>{l.name==e&&(this.form.express_code=l.code)}))},submit(){this.$refs.dialogForm.validate((async e=>{if(!e)return!1;var l;this.isSaveing=!0,l=await this.$API.integralOrder.delivery.post(this.form),this.isSaveing=!1,0===l.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success(l.msg)):this.$message.error(l.msg)}))}}},r=t(3744);const m=(0,r.Z)(d,[["render",s]]);var n=m},670:function(e,l,t){t.r(l),t.d(l,{default:function(){return m}});var a=t(6252),o=t(3577);function i(e,l,t,i,s,d){const r=(0,a.up)("el-table-column"),m=(0,a.up)("el-avatar"),n=(0,a.up)("el-table"),u=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.j4)(u,{title:s.titleMap[s.mode],modelValue:s.visible,"onUpdate:modelValue":l[0]||(l[0]=e=>s.visible=e),width:1e3,"destroy-on-close":"",onClosed:l[1]||(l[1]=l=>e.$emit("closed")),"close-on-click-modal":!1},{default:(0,a.w5)((()=>[(0,a.Wm)(n,{data:s.tableData,style:{width:"100%"}},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{prop:"goods_id",label:"商品ID"}),(0,a.Wm)(r,{label:"商品图片"},{default:(0,a.w5)((e=>[(0,a.Wm)(m,{shape:"square",size:36,src:e.row.goods_image},null,8,["src"])])),_:1}),(0,a.Wm)(r,{prop:"goods_name",label:"商品名称"}),(0,a.Wm)(r,{label:"商品规格"},{default:(0,a.w5)((e=>[(0,a.Uk)((0,o.zw)(e.row.rule.split("※").join(",")),1)])),_:1}),(0,a.Wm)(r,{prop:"num",label:"数量"}),(0,a.Wm)(r,{prop:"real_pay_amount",label:"实际支付金额"}),(0,a.Wm)(r,{prop:"real_pay_integral",label:"实际支付积分"})])),_:1},8,["data"])])),_:1},8,["title","modelValue"])}t(7658);var s={name:"integralOrderDetail",emits:["success","closed"],data(){return{mode:"detail",titleMap:{detail:"订单详情"},visible:!1,form:{},tableData:[]}},mounted(){},methods:{open(e){return this.form=e,this.visible=!0,this.tableData.push(this.form),console.log(this.tableData),this}}},d=t(3744);const r=(0,d.Z)(s,[["render",i]]);var m=r},7630:function(e,l,t){t.r(l),t.d(l,{default:function(){return m}});var a=t(6252),o=t(3577);function i(e,l,t,i,s,d){const r=(0,a.up)("el-tag"),m=(0,a.up)("el-timeline-item"),n=(0,a.up)("el-timeline"),u=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.j4)(u,{title:s.titleMap[s.mode],modelValue:s.visible,"onUpdate:modelValue":l[0]||(l[0]=e=>s.visible=e),width:600,"destroy-on-close":"",onClosed:l[1]||(l[1]=l=>e.$emit("closed")),"close-on-click-modal":!1},{default:(0,a.w5)((()=>[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a.Uk)("单号："+(0,o.zw)(s.express_no),1)])),_:1}),(0,a.Wm)(n,{reverse:s.reverse,style:{"margin-top":"20px"}},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.express,((e,l)=>((0,a.wg)(),(0,a.j4)(m,{key:l,timestamp:e.time},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.status),1)])),_:2},1032,["timestamp"])))),128))])),_:1},8,["reverse"])])),_:1},8,["title","modelValue"])}var s={name:"integralOrderExpressDetail",emits:["success","closed"],data(){return{mode:"expressDetail",titleMap:{expressDetail:"物流详情"},reverse:!0,visible:!1,express:[],express_no:""}},mounted(){},methods:{open(e){this.visible=!0;let l=JSON.parse(e.express_detail);return l&&(this.express_no=l.result.number,this.express=l.result.list),this}}},d=t(3744);const r=(0,d.Z)(s,[["render",i]]);var m=r},6471:function(e,l,t){t.r(l),t.d(l,{default:function(){return m}});var a=t(6252),o=t(3577);function i(e,l,t,i,s,d){const r=(0,a.up)("el-input"),m=(0,a.up)("el-form-item"),n=(0,a.up)("el-image"),u=(0,a.up)("el-button"),c=(0,a.up)("el-form");return(0,a.wg)(),(0,a.j4)(c,{ref:"loginForm",model:s.form,rules:s.rules,"label-width":"0",size:"large"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{prop:"user"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{modelValue:s.form.user,"onUpdate:modelValue":l[0]||(l[0]=e=>s.form.user=e),"prefix-icon":"el-icon-user",clearable:"",placeholder:e.$t("login.userPlaceholder")},null,8,["modelValue","placeholder"])])),_:1}),(0,a.Wm)(m,{prop:"password"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{modelValue:s.form.password,"onUpdate:modelValue":l[1]||(l[1]=e=>s.form.password=e),"prefix-icon":"el-icon-lock",clearable:"","show-password":"",placeholder:e.$t("login.PWPlaceholder")},null,8,["modelValue","placeholder"])])),_:1}),(0,a.Wm)(m,{prop:"captcha"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{modelValue:s.form.captcha,"onUpdate:modelValue":l[2]||(l[2]=e=>s.form.captcha=e),"prefix-icon":"el-icon-lock",clearable:"",style:{width:"290px"}},null,8,["modelValue"]),(0,a.Wm)(n,{src:s.captchaSrc,style:{width:"100px",height:"38px","margin-left":"10px",cursor:"pointer"},onClick:d.changeCaptcha},null,8,["src","onClick"])])),_:1}),(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[(0,a.Wm)(u,{type:"primary",style:{width:"100%"},loading:s.islogin,onClick:d.login},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.$t("login.signIn")),1)])),_:1},8,["loading","onClick"])])),_:1})])),_:1},8,["model","rules"])}var s={data(){return{userType:"admin",form:{user:"admin",password:"admin123",autologin:!1,captcha:"",key:""},captchaSrc:"",rules:{user:[{required:!0,message:this.$t("login.userError"),trigger:"blur"}],password:[{required:!0,message:this.$t("login.PWError"),trigger:"blur"}],captcha:[{required:!0,message:"请输入验证码",trigger:"blur"}]},islogin:!1}},mounted(){this.changeCaptcha(),document.onkeydown=e=>{var l=e||window.event;l&&13==l.keyCode&&this.login()}},methods:{async changeCaptcha(){let e=await this.$API.auth.captcha.get();this.captchaSrc="data:image/png;base64,"+e.data.img,this.form.key=e.data.key},async login(){var e=await this.$refs.loginForm.validate().catch((()=>{}));if(!e)return!1;this.islogin=!0;var l={username:this.form.user,password:this.form.password,captcha:this.form.captcha,key:this.form.key},t=await this.$API.auth.token.post(l);return 0!=t.code?(this.islogin=!1,this.$message.warning(t.msg),!1):(this.$TOOL.cookie.set("TOKEN",t.data.token,{expires:this.form.autologin?86400:0}),this.$TOOL.data.set("USER_INFO",t.data.userInfo),0==t.data.menu.length?(this.islogin=!1,this.$alert("当前用户无任何菜单权限，请联系系统管理员","无权限访问",{type:"error",center:!0}),!1):(this.$TOOL.data.set("MENU",t.data.menu),this.$router.replace({path:"/"}),this.$message.success("Login Success 登录成功"),void(this.islogin=!1)))}}},d=t(3744);const r=(0,d.Z)(s,[["render",i]]);var m=r},3058:function(e,l,t){t.r(l),t.d(l,{default:function(){return h}});var a=t(6252);const o=(0,a.Uk)("菜单"),i=(0,a.Uk)("功能"),s=(0,a.Uk)("显示"),d=(0,a.Uk)("隐藏"),r=(0,a.Uk)("取 消"),m=(0,a.Uk)("保 存");function n(e,l,t,n,u,c){const p=(0,a.up)("el-input"),h=(0,a.up)("el-form-item"),f=(0,a.up)("el-radio"),g=(0,a.up)("el-form"),w=(0,a.up)("el-button"),b=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.j4)(b,{title:u.titleMap[u.mode],modelValue:u.visible,"onUpdate:modelValue":l[13]||(l[13]=e=>u.visible=e),width:600,"destroy-on-close":"",onClosed:l[14]||(l[14]=l=>e.$emit("closed"))},{footer:(0,a.w5)((()=>[(0,a.Wm)(w,{onClick:l[11]||(l[11]=e=>u.visible=!1)},{default:(0,a.w5)((()=>[r])),_:1}),"show"!=u.mode?((0,a.wg)(),(0,a.j4)(w,{key:0,type:"primary",loading:u.isSaveing,onClick:l[12]||(l[12]=e=>c.submit())},{default:(0,a.w5)((()=>[m])),_:1},8,["loading"])):(0,a.kq)("",!0)])),default:(0,a.w5)((()=>[(0,a.Wm)(g,{model:u.form,rules:u.rules,disabled:"show"==u.mode,ref:"dialogForm","label-width":"100px","label-position":"left"},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{label:"上级菜单"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{modelValue:u.pname,"onUpdate:modelValue":l[0]||(l[0]=e=>u.pname=e),disabled:"true"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(h,{label:"菜单名称",prop:"name"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{modelValue:u.form.name,"onUpdate:modelValue":l[1]||(l[1]=e=>u.form.name=e),clearable:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(h,{label:"图标"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{modelValue:u.form.icon,"onUpdate:modelValue":l[2]||(l[2]=e=>u.form.icon=e),clearable:"",placeholder:"el-icon-suitcase"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(h,{label:"是否菜单"},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{label:1,modelValue:u.form.type,"onUpdate:modelValue":l[3]||(l[3]=e=>u.form.type=e)},{default:(0,a.w5)((()=>[o])),_:1},8,["modelValue"]),(0,a.Wm)(f,{label:2,modelValue:u.form.type,"onUpdate:modelValue":l[4]||(l[4]=e=>u.form.type=e)},{default:(0,a.w5)((()=>[i])),_:1},8,["modelValue"])])),_:1}),(0,a.Wm)(h,{label:"权限规则"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{modelValue:u.form.auth,"onUpdate:modelValue":l[5]||(l[5]=e=>u.form.auth=e),placeholder:"role/index",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(h,{label:"前端路由"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{modelValue:u.form.path,"onUpdate:modelValue":l[6]||(l[6]=e=>u.form.path=e),placeholder:"/role/index",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(h,{label:"前端组件"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{modelValue:u.form.component,"onUpdate:modelValue":l[7]||(l[7]=e=>u.form.component=e),placeholder:"role/index",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(h,{label:"排序"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{type:"number",modelValue:u.form.sort,"onUpdate:modelValue":l[8]||(l[8]=e=>u.form.sort=e),clearable:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(h,{label:"是否显示"},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{label:1,modelValue:u.form.status,"onUpdate:modelValue":l[9]||(l[9]=e=>u.form.status=e)},{default:(0,a.w5)((()=>[s])),_:1},8,["modelValue"]),(0,a.Wm)(f,{label:2,modelValue:u.form.status,"onUpdate:modelValue":l[10]||(l[10]=e=>u.form.status=e)},{default:(0,a.w5)((()=>[d])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules","disabled"])])),_:1},8,["title","modelValue"])}var u={emits:["success","closed"],data(){return{mode:"add",titleMap:{add:"新增菜单",edit:"编辑菜单",show:"查看"},visible:!1,isSaveing:!1,pname:"顶级菜单",form:{id:"",pid:0,type:1,name:"",auth:"",path:"",icon:"",component:"",sort:1,status:1},rules:{name:[{required:!0,message:"请输入菜单名称",trigger:"blur"}]}}},mounted(){},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},submit(){this.$refs.dialogForm.validate((async e=>{if(!e)return!1;var l;this.isSaveing=!0,l="add"==this.mode?await this.$API.menu.add.post(this.form):await this.$API.menu.edit.post(this.form),this.isSaveing=!1,0==l.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success(l.msg)):this.$message.error(l.msg)}))},setData(e){this.form.id=e.id,this.form.pid=e.pid,this.form.type=e.type,this.form.name=e.name,this.form.auth=e.auth,this.form.path=e.path,this.form.icon=e.icon,this.form.component=e.component,this.form.sort=e.sort,this.form.status=e.status},setParentData(e){this.form.pid=e.id,this.pname=e.name}}},c=t(3744);const p=(0,c.Z)(u,[["render",n]]);var h=p},8297:function(e,l,t){t.r(l),t.d(l,{default:function(){return r}});var a=t(6252);function o(e,l,t,o,i,s){const d=(0,a.up)("el-input"),r=(0,a.up)("el-form-item"),m=(0,a.up)("el-form"),n=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.j4)(n,{title:i.titleMap[i.mode],modelValue:i.visible,"onUpdate:modelValue":l[2]||(l[2]=e=>i.visible=e),width:600,"destroy-on-close":"",onClosed:l[3]||(l[3]=l=>e.$emit("closed")),"close-on-click-modal":!1},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{model:i.form,disabled:"show"===i.mode,ref:"dialogForm","label-width":"100px","label-position":"left"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{label:"三方单号",prop:"third_no"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{type:"textarea",modelValue:i.form.third_no,"onUpdate:modelValue":l[0]||(l[0]=e=>i.form.third_no=e),disabled:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(r,{label:"三方返回信息",prop:"third_return"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{modelValue:i.form.third_return,"onUpdate:modelValue":l[1]||(l[1]=e=>i.form.third_return=e),disabled:""},null,8,["modelValue"])])),_:1})])),_:1},8,["model","disabled"])])),_:1},8,["title","modelValue"])}var i={name:"rechargeLogDetail",emits:["success","closed"],data(){return{mode:"detail",titleMap:{detail:"充值详情"},visible:!1,form:{}}},mounted(){},methods:{open(e){return this.form=e,this.visible=!0,this}}},s=t(3744);const d=(0,s.Z)(i,[["render",o]]);var r=d},8635:function(e,l,t){t.r(l),t.d(l,{default:function(){return c}});var a=t(6252);const o=(0,a.Uk)("正常"),i=(0,a.Uk)("禁用"),s=(0,a.Uk)("取 消"),d=(0,a.Uk)("保 存");function r(e,l,t,r,m,n){const u=(0,a.up)("el-input"),c=(0,a.up)("el-form-item"),p=(0,a.up)("el-radio"),h=(0,a.up)("el-tree"),f=(0,a.up)("el-form"),g=(0,a.up)("el-button"),w=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.j4)(w,{title:m.titleMap[m.mode],modelValue:m.visible,"onUpdate:modelValue":l[6]||(l[6]=e=>m.visible=e),width:500,"destroy-on-close":"",onClosed:l[7]||(l[7]=l=>e.$emit("closed"))},{footer:(0,a.w5)((()=>[(0,a.Wm)(g,{onClick:l[4]||(l[4]=e=>m.visible=!1)},{default:(0,a.w5)((()=>[s])),_:1}),"show"!==m.mode?((0,a.wg)(),(0,a.j4)(g,{key:0,type:"primary",loading:m.isSaveing,onClick:l[5]||(l[5]=e=>n.submit())},{default:(0,a.w5)((()=>[d])),_:1},8,["loading"])):(0,a.kq)("",!0)])),default:(0,a.w5)((()=>[(0,a.Wm)(f,{model:m.form,rules:m.rules,disabled:"show"===m.mode,ref:"dialogForm","label-width":"100px","label-position":"left"},{default:(0,a.w5)((()=>["add"===m.mode?((0,a.wg)(),(0,a.j4)(c,{key:0,label:"角色名称",prop:"name"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{modelValue:m.form.name,"onUpdate:modelValue":l[0]||(l[0]=e=>m.form.name=e),clearable:""},null,8,["modelValue"])])),_:1})):((0,a.wg)(),(0,a.j4)(c,{key:1,label:"角色名称",prop:"name"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{modelValue:m.form.name,"onUpdate:modelValue":l[1]||(l[1]=e=>m.form.name=e),clearable:"",placeholder:"输入则为修改"},null,8,["modelValue"])])),_:1})),(0,a.Wm)(c,{label:"状态",prop:"status"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{modelValue:m.form.status,"onUpdate:modelValue":l[2]||(l[2]=e=>m.form.status=e),label:"1"},{default:(0,a.w5)((()=>[o])),_:1},8,["modelValue"]),(0,a.Wm)(p,{modelValue:m.form.status,"onUpdate:modelValue":l[3]||(l[3]=e=>m.form.status=e),label:"2"},{default:(0,a.w5)((()=>[i])),_:1},8,["modelValue"])])),_:1}),(0,a.Wm)(c,{label:"分配权限",prop:"rule"},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{data:m.treeData,"node-key":"id","show-checkbox":"","highlight-current":"",onCheck:n.checkHandler,"default-checked-keys":m.checkedId,ref:"menuTree","check-strictly":m.isCheck,props:m.defaultProps},null,8,["data","onCheck","default-checked-keys","check-strictly","props"])])),_:1})])),_:1},8,["model","rules","disabled"])])),_:1},8,["title","modelValue"])}t(7658);var m={emits:["success","closed"],data(){return{isCheck:!1,checkedId:[15,16],setTree:[],treeData:[],defaultProps:{children:"children",label:"name",id:"id"},mode:"add",titleMap:{add:"新增角色",edit:"编辑角色",show:"查看"},visible:!1,isSaveing:!1,form:{id:"",name:"",rule:"",status:"1"},rules:{name:[{required:!0,message:"请输入角色名称",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"blur"}],rule:[{required:!0,message:"请分配权限",trigger:"blur"}]}}},mounted(){this.getAllMenu()},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},async getAllMenu(){let e=await this.$API.menu.getAllMenu.get();this.setTree=e.data,this.getListData()},checkHandler(...e){let l=e[1].checkedNodes.map((e=>e.id));this.form.rule=l},getListData(){let e=[];this.setTree.forEach((function(l){let t=l.pid;if(0===t){let a={id:l.id,name:l.name,parentId:t};e.push(a)}})),this.treeData=this.data2treeDG(this.setTree,e)},data2treeDG(e,l){for(let t=0;t<l.length;t++){let a=l[t],o=[],i=a.id;for(let l=0;l<e.length;l++){let t=e[l],a=t.pid;if(a===i){let e={id:t.id,name:t.name,parentId:a};o.push(e)}}a.children=o,o.length>0&&this.data2treeDG(e,o)}return l},submit(){this.$refs.dialogForm.validate((async e=>{if(!e)return!1;{let e;this.isSaveing=!0,e="add"===this.mode?await this.$API.role.add.post(this.form):await this.$API.role.edit.post(this.form),this.isSaveing=!1,0===e.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success(e.msg)):this.$message.error(e.msg)}}))},setData(e){this.isCheck=!0,this.$nextTick((()=>{this.$refs.menuTree.setCheckedKeys(e.rule),this.isCheck=!1})),this.form.id=e.id,this.form.name=e.name,this.form.status=e.status.toString(),this.form.rule=e.rule}}},n=t(3744);const u=(0,n.Z)(m,[["render",r]]);var c=u},7192:function(e,l,t){t.r(l),t.d(l,{default:function(){return P}});var a=t(6252),o=t(3577);const i=e=>((0,a.dD)("data-v-a55a53b8"),e=e(),(0,a.Cn)(),e),s=(0,a.Uk)("首页"),d=(0,a.Uk)("积分商城"),r=(0,a.Uk)("选择商品"),m=(0,a.Uk)("删除"),n={class:"img-list"},u={key:0},c=["src"],p={class:"img-tools"},h=i((()=>(0,a._)("li",{style:{color:"#999","font-size":"12px",width:"250px","line-height":"58px","margin-left":"30px"}}," 建议尺寸：690*294 ",-1))),f=(0,a.Uk)("正常"),g=(0,a.Uk)("禁用"),w=(0,a.Uk)("取 消"),b=(0,a.Uk)("保 存"),_={class:"search-box"},y=(0,a.Uk)("查询"),v=(0,a.Uk)(" "),V=(0,a.Uk)("普通商品"),k=(0,a.Uk)("盲盒商品"),W={key:0},x={key:1},U=(0,a.Uk)("上架"),C=(0,a.Uk)("下架"),I={class:"page-div",style:{"margin-top":"20px"}};function $(e,l,t,i,$,S){const D=(0,a.up)("el-radio"),F=(0,a.up)("el-form-item"),q=(0,a.up)("el-button"),P=(0,a.up)("el-table-column"),z=(0,a.up)("el-table"),A=(0,a.up)("el-input"),j=(0,a.up)("el-icon"),L=(0,a.up)("el-form"),M=(0,a.up)("el-dialog"),N=(0,a.up)("el-cascader"),T=(0,a.up)("el-avatar"),G=(0,a.up)("el-tag"),Z=(0,a.up)("el-pagination"),R=(0,a.up)("Attachment");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(M,{title:$.titleMap[$.mode],modelValue:$.visible,"onUpdate:modelValue":l[9]||(l[9]=e=>$.visible=e),width:900,"destroy-on-close":"",onClosed:l[10]||(l[10]=l=>e.$emit("closed")),"close-on-click-modal":!1},{footer:(0,a.w5)((()=>[(0,a.Wm)(q,{onClick:l[7]||(l[7]=e=>$.visible=!1)},{default:(0,a.w5)((()=>[w])),_:1}),"show"!=$.mode?((0,a.wg)(),(0,a.j4)(q,{key:0,type:"primary",loading:$.isSaveing,onClick:l[8]||(l[8]=e=>S.submit())},{default:(0,a.w5)((()=>[b])),_:1},8,["loading"])):(0,a.kq)("",!0)])),default:(0,a.w5)((()=>[(0,a.Wm)(L,{model:$.form,rules:$.rules,disabled:"show"==$.mode,ref:"dialogForm","label-width":"110px","label-position":"left"},{default:(0,a.w5)((()=>[(0,a.Wm)(F,{label:"位置",prop:"type"},{default:(0,a.w5)((()=>[(0,a.Wm)(D,{label:1,modelValue:$.form.type,"onUpdate:modelValue":l[0]||(l[0]=e=>$.form.type=e)},{default:(0,a.w5)((()=>[s])),_:1},8,["modelValue"]),(0,a.Wm)(D,{label:2,modelValue:$.form.type,"onUpdate:modelValue":l[1]||(l[1]=e=>$.form.type=e)},{default:(0,a.w5)((()=>[d])),_:1},8,["modelValue"])])),_:1}),(0,a.Wm)(F,{label:"选择商品",prop:"goods_name"},{default:(0,a.w5)((()=>[(0,a.Wm)(q,{type:"primary",icon:"el-icon-plus",onClick:S.selectGoods,size:"small"},{default:(0,a.w5)((()=>[r])),_:1},8,["onClick"]),(0,a.Wm)(z,{data:$.selectedGoods,style:{width:"100%"}},{default:(0,a.w5)((()=>[(0,a.Wm)(P,{prop:"id",label:"ID"}),(0,a.Wm)(P,{prop:"name",label:"商品名"}),(0,a.Wm)(P,{label:"操作"},{default:(0,a.w5)((e=>[(0,a.Wm)(q,{onClick:l=>S.handleDel(e.row),type:"text",size:"small"},{default:(0,a.w5)((()=>[m])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])])),_:1}),(0,a.Wm)(F,{label:"轮播描述",prop:"title"},{default:(0,a.w5)((()=>[(0,a.Wm)(A,{modelValue:$.form.title,"onUpdate:modelValue":l[2]||(l[2]=e=>$.form.title=e),placeholder:"轮播描述",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(F,{label:"封面图",prop:"pic"},{default:(0,a.w5)((()=>[(0,a._)("ul",n,[$.form.pic?((0,a.wg)(),(0,a.iD)("li",u,[(0,a._)("img",{src:$.form.pic,alt:"封面图",style:{height:"58px",width:"58px"}},null,8,c),(0,a._)("div",p,[(0,a.Wm)(j,{style:{"font-size":"14px",color:"#fff"},onClick:l[3]||(l[3]=e=>S.removeIcon())},{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)($.deleteIcon)))])),_:1})])])):(0,a.kq)("",!0),(0,a._)("li",null,[(0,a._)("div",{class:"addImg",onClick:l[4]||(l[4]=(...e)=>S.showImage&&S.showImage(...e))},[(0,a.Wm)(j,null,{default:(0,a.w5)((()=>[((0,a.wg)(),(0,a.j4)((0,a.LL)($.plusIcon)))])),_:1})])]),h])])),_:1}),(0,a.Wm)(F,{label:"状态",prop:"status"},{default:(0,a.w5)((()=>[(0,a.Wm)(D,{label:1,modelValue:$.form.status,"onUpdate:modelValue":l[5]||(l[5]=e=>$.form.status=e)},{default:(0,a.w5)((()=>[f])),_:1},8,["modelValue"]),(0,a.Wm)(D,{label:2,modelValue:$.form.status,"onUpdate:modelValue":l[6]||(l[6]=e=>$.form.status=e)},{default:(0,a.w5)((()=>[g])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules","disabled"])])),_:1},8,["title","modelValue"]),(0,a.Wm)(M,{title:"商品选择",modelValue:$.dialogVisible,"onUpdate:modelValue":l[14]||(l[14]=e=>$.dialogVisible=e),width:"50%"},{default:(0,a.w5)((()=>[(0,a._)("div",_,[(0,a.Wm)(L,{inline:!0,model:$.searchForm,class:"demo-form-inline",style:{"margin-top":"20px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(F,{label:"商品名称"},{default:(0,a.w5)((()=>[(0,a.Wm)(A,{modelValue:$.searchForm.name,"onUpdate:modelValue":l[11]||(l[11]=e=>$.searchForm.name=e),placeholder:"",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(F,{label:"商品分类"},{default:(0,a.w5)((()=>[(0,a.Wm)(N,{modelValue:$.selectedCate,"onUpdate:modelValue":l[12]||(l[12]=e=>$.selectedCate=e),options:$.goodsCate,props:$.treeProps,clearable:""},null,8,["modelValue","options","props"])])),_:1}),(0,a.Wm)(F,null,{default:(0,a.w5)((()=>[(0,a.Wm)(q,{type:"primary",onClick:S.onSubmit,icon:"el-icon-search"},{default:(0,a.w5)((()=>[y])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])]),(0,a.Wm)(z,{data:$.tableData,"row-style":{height:"57px"},onRowClick:S.singleElection,"highlight-current-row":"",style:{width:"100%","font-size":"12px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(P,{width:"55",label:"选择"},{default:(0,a.w5)((e=>[(0,a.Wm)(D,{class:"radio",modelValue:$.templateSelection,"onUpdate:modelValue":l[13]||(l[13]=e=>$.templateSelection=e),label:e.row.id},{default:(0,a.w5)((()=>[v])),_:2},1032,["modelValue","label"])])),_:1}),(0,a.Wm)(P,{prop:"id",label:"商品ID"}),(0,a.Wm)(P,{label:"商品图"},{default:(0,a.w5)((e=>[(0,a.Wm)(T,{shape:"square",size:36,src:e.row.image.split(",")[0]},null,8,["src"])])),_:1}),(0,a.Wm)(P,{prop:"name",label:"商品名称"}),(0,a.Wm)(P,{prop:"cate.name",label:"商品分类"}),(0,a.Wm)(P,{label:"商品类型"},{default:(0,a.w5)((e=>[1==e.row.goods_type?((0,a.wg)(),(0,a.j4)(G,{key:0,type:"danger"},{default:(0,a.w5)((()=>[V])),_:1})):(0,a.kq)("",!0),2==e.row.goods_type?((0,a.wg)(),(0,a.j4)(G,{key:1,type:"success"},{default:(0,a.w5)((()=>[k])),_:1})):(0,a.kq)("",!0)])),_:1}),(0,a.Wm)(P,{prop:"price",label:"商品售价"}),(0,a.Wm)(P,{prop:"sales",label:"销量"}),(0,a.Wm)(P,{label:"库存"},{default:(0,a.w5)((e=>[-1==e.row.stock?((0,a.wg)(),(0,a.iD)("span",W,"无限库存")):((0,a.wg)(),(0,a.iD)("span",x,(0,o.zw)(e.row.stock),1))])),_:1}),(0,a.Wm)(P,{label:"状态"},{default:(0,a.w5)((e=>[1==e.row.status?((0,a.wg)(),(0,a.j4)(G,{key:0,type:"success"},{default:(0,a.w5)((()=>[U])),_:1})):(0,a.kq)("",!0),2==e.row.status?((0,a.wg)(),(0,a.j4)(G,{key:1,type:"danger"},{default:(0,a.w5)((()=>[C])),_:1})):(0,a.kq)("",!0)])),_:1})])),_:1},8,["data","onRowClick"]),(0,a._)("div",I,[(0,a.Wm)(Z,{background:"",layout:"->, prev, pager, next","page-size":$.searchForm.limit,onCurrentChange:S.pageChangeHandle,total:$.page.total},null,8,["page-size","onCurrentChange","total"])])])),_:1},8,["modelValue"]),(0,a.Wm)(M,{title:"选择资源",modelValue:$.resourceVisible,"onUpdate:modelValue":l[15]||(l[15]=e=>$.resourceVisible=e),width:1200,"destroy-on-close":""},{default:(0,a.w5)((()=>[(0,a.Wm)(R,{"select-num":1,onSelectedFiles:S.selectedFiles},null,8,["onSelectedFiles"])])),_:1},8,["modelValue"])],64)}var S=t(1686),D={emits:["success","closed"],components:{Attachment:S.Z},data(){return{mode:"add",titleMap:{add:"添加轮播配置",edit:"编辑轮播配置"},dialogVisible:!1,visible:!1,isSaveing:!1,form:{type:1,status:1},options:[],plusIcon:"el-icon-plus",deleteIcon:"el-icon-delete",rules:{type:[{required:!0,message:"请选择位置",trigger:"blur"}],goods_name:[{required:!0,message:"请选择商品",trigger:"blur"}],title:[{required:!0,message:"请填写轮播描述",trigger:"blur"}],pic:[{required:!0,message:"请选择图片",trigger:"blur"}]},resourceVisible:!1,selectedGoods:[],selectedCate:"",goodsCate:[],treeProps:{value:"id",label:"name",children:"children",checkStrictly:!0},searchForm:{goods_type:"",cate_id:"",status:1,name:"",page:1,limit:10},page:{total:0},tableData:[],templateSelection:""}},mounted(){this.getGoodsList(),this.getGoodsCate()},methods:{open(e){return this.mode=e,this.visible=!0,this},onSubmit(){this.selectedCate?(1==this.selectedCate.length&&(this.searchForm.cate_id=this.selectedCate[0]),2==this.selectedCate.length&&(this.searchForm.cate_id=this.selectedCate[1])):this.searchForm.cate_id="",this.getGoodsList()},pageChangeHandle(e){this.searchForm.page=e},submit(){this.$refs.dialogForm.validate((async e=>{if(!e)return!1;var l;this.isSaveing=!0,l="add"==this.mode?await this.$API.sliderSetting.add.post(this.form):await this.$API.sliderSetting.edit.post(this.form),this.isSaveing=!1,0==l.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success(l.msg)):this.$message.error(l.msg)}))},removeIcon(){this.form.pic=""},showImage(){this.resourceVisible=!0},selectedFiles(e){this.form.pic=e[0].url,this.resourceVisible=!1},selectGoods(){this.dialogVisible=!0},handleDel(){this.selectedGoods=[],this.form.goods_id=0,this.form.goods_name=""},async getGoodsList(){let e=await this.$API.goods.list.get(this.searchForm);this.tableData=e.data.rows,this.page.total=e.data.total},async getGoodsCate(){let e=await this.$API.goodsCate.list.get();this.goodsCate=e.data},singleElection(e){this.templateSelection=e.id,this.selectedGoods=this.tableData.filter((l=>l.id===e.id)),this.form.goods_id=this.selectedGoods[0].id,this.form.goods_type=this.selectedGoods[0].goods_type,this.form.goods_name=this.selectedGoods[0].name,this.dialogVisible=!1},setData(e){this.form.type=e.type,this.form.id=e.id,this.form.title=e.title,this.form.goods_id=e.goods_id,this.form.goods_name=e.goods_name,this.form.goods_type=e.goods_type,this.form.pic=e.pic,this.form.status=e.status,this.selectedGoods=[{id:e.goods_id,name:e.goods_name}]}}},F=t(3744);const q=(0,F.Z)(D,[["render",$],["__scopeId","data-v-a55a53b8"]]);var P=q},713:function(e,l,t){t.r(l),t.d(l,{default:function(){return n}});var a=t(6252);const o=(0,a.Uk)("取 消"),i=(0,a.Uk)("保 存");function s(e,l,t,s,d,r){const m=(0,a.up)("el-input"),n=(0,a.up)("el-form-item"),u=(0,a.up)("el-cascader"),c=(0,a.up)("el-form"),p=(0,a.up)("el-button"),h=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.j4)(h,{title:d.titleMap[d.mode],modelValue:d.visible,"onUpdate:modelValue":l[6]||(l[6]=e=>d.visible=e),width:600,"destroy-on-close":"",onClosed:l[7]||(l[7]=l=>e.$emit("closed"))},{footer:(0,a.w5)((()=>[(0,a.Wm)(p,{onClick:l[4]||(l[4]=e=>d.visible=!1)},{default:(0,a.w5)((()=>[o])),_:1}),"show"!==d.mode?((0,a.wg)(),(0,a.j4)(p,{key:0,type:"primary",loading:d.isSaveing,onClick:l[5]||(l[5]=e=>r.submit())},{default:(0,a.w5)((()=>[i])),_:1},8,["loading"])):(0,a.kq)("",!0)])),default:(0,a.w5)((()=>[(0,a.Wm)(c,{model:d.form,rules:d.rules,disabled:"show"===d.mode,ref:"dialogForm","label-width":"100px","label-position":"left"},{default:(0,a.w5)((()=>[(0,a.Wm)(n,{label:"收件人姓名",prop:"receiver"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{modelValue:d.form.receiver,"onUpdate:modelValue":l[0]||(l[0]=e=>d.form.receiver=e),placeholder:"收件人姓名",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(n,{label:"收件人手机号",prop:"phone"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{type:"number",onkeypress:"return(/[\\d]/.test(String.fromCharCode(event.keyCode)))",oninput:"if (isNaN(value)) {value = parseFloat(value)}\r\n\t\t\t\t\t\t   if (value.includes('-')) {value = '0'}",modelValue:d.form.phone,"onUpdate:modelValue":l[1]||(l[1]=e=>d.form.phone=e),placeholder:"收件人",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(n,{label:"收件人省市区"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{style:{width:"350px"},modelValue:d.selected_areas,"onUpdate:modelValue":l[2]||(l[2]=e=>d.selected_areas=e),options:d.areas,onChange:r.handleChange},null,8,["modelValue","options","onChange"])])),_:1}),(0,a.Wm)(n,{label:"收件人详细地址",prop:"address"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{modelValue:d.form.address,"onUpdate:modelValue":l[3]||(l[3]=e=>d.form.address=e),placeholder:"收件人详细地址",clearable:""},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules","disabled"])])),_:1},8,["title","modelValue"])}t(7658);var d={emits:["success","closed"],data(){return{selected_areas:[],areas:[],mode:"edit",titleMap:{edit:"编辑会员地址",show:"查看"},visible:!1,isSaveing:!1,form:{id:"",receiver:"",phone:"",province_code:"",city_code:"",area_code:"",address:""},rules:{receiver:[{required:!0,message:"请输入收件人名",trigger:"blur"}],phone:[{required:!0,message:"请输入收件人手机号",trigger:"blur"}],address:[{required:!0,message:"请输入详细地址",trigger:"blur"}]}}},mounted(){this.getAreas()},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},async getAreas(){let e=await this.$API.userAddress.areas.get();this.areas=e.data},submit(){this.$refs.dialogForm.validate((async e=>{if(!e)return!1;var l;this.isSaveing=!0,this.form.province_code=this.selected_areas[0],this.form.city_code=this.selected_areas[1],this.form.area_code=this.selected_areas[2],l=await this.$API.userAddress.edit.post(this.form),this.isSaveing=!1,0===l.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success(l.msg)):this.$message.error(l.msg)}))},setData(e){this.form.id=e.id,this.form.receiver=e.receiver,this.form.phone=e.phone,this.form.province_code=e.province_code,this.form.city_code=e.city_code,this.form.area_code=e.area_code,this.form.address=e.address,this.selected_areas.push(parseInt(e.province_code)),this.selected_areas.push(parseInt(e.city_code)),this.selected_areas.push(parseInt(e.area_code))},handleChange(e){console.log(e)}}},r=t(3744);const m=(0,r.Z)(d,[["render",s],["__scopeId","data-v-1323bfb2"]]);var n=m},9164:function(e,l,t){t.r(l),t.d(l,{default:function(){return n}});var a=t(6252),o=t(3577);const i=(0,a.Uk)("取 消");function s(e,l,t,s,d,r){const m=(0,a.up)("el-timeline-item"),n=(0,a.up)("el-timeline"),u=(0,a.up)("el-form-item"),c=(0,a.up)("el-form"),p=(0,a.up)("el-button"),h=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.j4)(h,{title:d.titleMap[d.mode],modelValue:d.visible,"onUpdate:modelValue":l[1]||(l[1]=e=>d.visible=e),width:600,"destroy-on-close":"",onClosed:l[2]||(l[2]=l=>e.$emit("closed")),"close-on-click-modal":!1},{footer:(0,a.w5)((()=>[(0,a.Wm)(p,{onClick:l[0]||(l[0]=e=>d.visible=!1)},{default:(0,a.w5)((()=>[i])),_:1})])),default:(0,a.w5)((()=>[(0,a.Wm)(c,{model:e.form,rules:e.rules,disabled:"show"===d.mode,ref:"dialogForm","label-width":"100px","label-position":"left"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{label:"物流信息"},{default:(0,a.w5)((()=>[(0,a.Wm)(n,null,{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(d.activities,((e,l)=>((0,a.wg)(),(0,a.j4)(m,{key:l,timestamp:e.timestamp},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.content),1)])),_:2},1032,["timestamp"])))),128))])),_:1})])),_:1})])),_:1},8,["model","rules","disabled"])])),_:1},8,["title","modelValue"])}var d={emits:["success","closed"],data(){return{mode:"show",titleMap:{show:"查看物流信息"},visible:!1,activities:[]}},mounted(){},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},setData(e){this.activities=e.express.info}}},r=t(3744);const m=(0,r.Z)(d,[["render",s],["__scopeId","data-v-690323ea"]]);var n=m},6361:function(e,l,t){t.r(l),t.d(l,{default:function(){return m}});var a=t(6252),o=t(3577);function i(e,l,t,i,s,d){const r=(0,a.up)("el-descriptions-item"),m=(0,a.up)("el-tag"),n=(0,a.up)("el-descriptions"),u=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.j4)(u,{title:s.titleMap[s.mode],modelValue:s.visible,"onUpdate:modelValue":l[0]||(l[0]=e=>s.visible=e),width:800,"destroy-on-close":"",onClosed:l[1]||(l[1]=l=>e.$emit("closed")),"close-on-click-modal":!1},{default:(0,a.w5)((()=>[(0,a.Wm)(n,null,{default:(0,a.w5)((()=>[(0,a.Wm)(r,{label:"订单号:"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(s.info.order_no),1)])),_:1}),(0,a.Wm)(r,{label:"支付订单号:"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(s.info.pay_no),1)])),_:1}),(0,a.Wm)(r,{label:"支付金额:"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{size:"small",type:"danger"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(s.info.amount),1)])),_:1})])),_:1}),(0,a.Wm)(r,{label:"支付时间:"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(s.info.pay_time),1)])),_:1}),(0,a.Wm)(r,{label:"支付方式:"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(s.info.pay_way_txt),1)])),_:1}),(0,a.Wm)(r,{label:"支付状态:"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{size:"small"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(s.info.status_txt),1)])),_:1})])),_:1}),(0,a.Wm)(r,{label:"三方单号:"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(s.info.third_no),1)])),_:1})])),_:1})])),_:1},8,["title","modelValue"])}var s={emits:["success","closed"],data(){return{mode:"show",titleMap:{show:"查看订单支付信息"},visible:!1,info:{}}},mounted(){},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},setData(e){this.getInfo(e.express_order_id)},async getInfo(e){let l=await this.$API.userBoxDeliver.expressOrder.get({id:e});this.info=l.data}}},d=t(3744);const r=(0,d.Z)(s,[["render",i]]);var m=r},3880:function(e,l,t){t.r(l),t.d(l,{default:function(){return n}});var a=t(6252);const o=(0,a.Uk)("取 消"),i=(0,a.Uk)("保 存");function s(e,l,t,s,d,r){const m=(0,a.up)("el-input"),n=(0,a.up)("el-form-item"),u=(0,a.up)("el-form"),c=(0,a.up)("el-button"),p=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.j4)(p,{title:d.titleMap[d.mode],modelValue:d.visible,"onUpdate:modelValue":l[4]||(l[4]=e=>d.visible=e),width:600,"destroy-on-close":"",onClosed:l[5]||(l[5]=l=>e.$emit("closed")),"close-on-click-modal":!1},{footer:(0,a.w5)((()=>[(0,a.Wm)(c,{onClick:l[2]||(l[2]=e=>d.visible=!1)},{default:(0,a.w5)((()=>[o])),_:1}),"show"!==d.mode?((0,a.wg)(),(0,a.j4)(c,{key:0,type:"primary",loading:d.isSaveing,onClick:l[3]||(l[3]=e=>r.submit())},{default:(0,a.w5)((()=>[i])),_:1},8,["loading"])):(0,a.kq)("",!0)])),default:(0,a.w5)((()=>[(0,a.Wm)(u,{model:d.form,rules:d.rules,disabled:"show"===d.mode,ref:"dialogForm","label-width":"100px","label-position":"left"},{default:(0,a.w5)((()=>[(0,a.Wm)(n,{label:"物流公司名称",prop:"express_name"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{modelValue:d.form.express_name,"onUpdate:modelValue":l[0]||(l[0]=e=>d.form.express_name=e),placeholder:"物流公司名称",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(n,{label:"物流单号",prop:"express_no"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{modelValue:d.form.express_no,"onUpdate:modelValue":l[1]||(l[1]=e=>d.form.express_no=e),placeholder:"物流单号",clearable:""},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules","disabled"])])),_:1},8,["title","modelValue"])}var d={emits:["success","closed"],data(){return{areas:[],mode:"deliver",titleMap:{deliver:"发货",show:"查看"},visible:!1,isSaveing:!1,form:{id:"",express_name:"",express_no:""},rules:{express_name:[{required:!0,message:"请输入物流公司名称",trigger:"blur"}],express_no:[{required:!0,message:"请输入物流单号",trigger:"blur"}]}}},mounted(){},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},submit(){this.$refs.dialogForm.validate((async e=>{if(!e)return!1;var l;this.isSaveing=!0,l=await this.$API.userBoxDeliver.deliver.post(this.form),this.isSaveing=!1,0===l.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success(l.msg)):this.$message.error(l.msg)}))},setData(e){this.form.id=e.id},handleChange(e){console.log(e)}}},r=t(3744);const m=(0,r.Z)(d,[["render",s],["__scopeId","data-v-f594a446"]]);var n=m},441:function(e,l,t){t.r(l),t.d(l,{default:function(){return n}});var a=t(6252),o=t(3577);const i=(0,a.Uk)("取 消");function s(e,l,t,s,d,r){const m=(0,a.up)("el-timeline-item"),n=(0,a.up)("el-timeline"),u=(0,a.up)("el-form-item"),c=(0,a.up)("el-form"),p=(0,a.up)("el-button"),h=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.j4)(h,{title:d.titleMap[d.mode],modelValue:d.visible,"onUpdate:modelValue":l[1]||(l[1]=e=>d.visible=e),width:600,"destroy-on-close":"",onClosed:l[2]||(l[2]=l=>e.$emit("closed")),"close-on-click-modal":!1},{footer:(0,a.w5)((()=>[(0,a.Wm)(p,{onClick:l[0]||(l[0]=e=>d.visible=!1)},{default:(0,a.w5)((()=>[i])),_:1})])),default:(0,a.w5)((()=>[(0,a.Wm)(c,{model:e.form,rules:e.rules,disabled:"show"===d.mode,ref:"dialogForm","label-width":"100px","label-position":"left"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{label:"物流信息"},{default:(0,a.w5)((()=>[(0,a.Wm)(n,null,{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(d.activities,((e,l)=>((0,a.wg)(),(0,a.j4)(m,{key:l,timestamp:e.timestamp},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.content),1)])),_:2},1032,["timestamp"])))),128))])),_:1})])),_:1})])),_:1},8,["model","rules","disabled"])])),_:1},8,["title","modelValue"])}var d={emits:["success","closed"],data(){return{mode:"show",titleMap:{show:"查看物流信息"},visible:!1,activities:[]}},mounted(){},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},setData(e){this.activities=e.express.info}}},r=t(3744);const m=(0,r.Z)(d,[["render",s],["__scopeId","data-v-d93ae1d6"]]);var n=m},2155:function(e,l,t){t.r(l),t.d(l,{default:function(){return c}});var a=t(6252);const o=(0,a.Uk)("正常"),i=(0,a.Uk)("禁用"),s=(0,a.Uk)("取 消"),d=(0,a.Uk)("保 存");function r(e,l,t,r,m,n){const u=(0,a.up)("el-input"),c=(0,a.up)("el-form-item"),p=(0,a.up)("el-radio"),h=(0,a.up)("el-form"),f=(0,a.up)("el-button"),g=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.j4)(g,{title:m.titleMap[m.mode],modelValue:m.visible,"onUpdate:modelValue":l[10]||(l[10]=e=>m.visible=e),width:600,"destroy-on-close":"",onClosed:l[11]||(l[11]=l=>e.$emit("closed"))},{footer:(0,a.w5)((()=>[(0,a.Wm)(f,{onClick:l[8]||(l[8]=e=>m.visible=!1)},{default:(0,a.w5)((()=>[s])),_:1}),"show"!==m.mode?((0,a.wg)(),(0,a.j4)(f,{key:0,type:"primary",loading:m.isSaveing,onClick:l[9]||(l[9]=e=>n.submit())},{default:(0,a.w5)((()=>[d])),_:1},8,["loading"])):(0,a.kq)("",!0)])),default:(0,a.w5)((()=>["edit"===m.mode?((0,a.wg)(),(0,a.j4)(h,{key:0,model:m.form,rules:m.editRules,disabled:"show"===m.mode,ref:"editForm","label-width":"100px","label-position":"left"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{label:"昵称",prop:"nickname"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{modelValue:m.form.nickname,"onUpdate:modelValue":l[0]||(l[0]=e=>m.form.nickname=e),placeholder:"昵称",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(c,{label:"手机号"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{type:"number",modelValue:m.form.phone,"onUpdate:modelValue":l[1]||(l[1]=e=>m.form.phone=e),placeholder:"",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(c,{label:"积分"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{type:"number",onkeypress:"return(/[\\d]/.test(String.fromCharCode(event.keyCode)))",oninput:"if (isNaN(value)) {value = parseFloat(value)}\r\n\t\t\t\t\t\t   if (value.includes('-')) {value = '0'}",modelValue:m.form.integral,"onUpdate:modelValue":l[2]||(l[2]=e=>m.form.integral=e),placeholder:"",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(c,{label:"余额"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{type:"number",oninput:"if (isNaN(value)) {value = parseFloat(value)}\r\n\t\t\t\t\t\t   if (value.includes('-')) {value = '0'}\r\n\t\t\t\t\t\t   if (value.indexOf('.')>0) {value=value.slice(0,value.indexOf('.')+3)}",modelValue:m.form.balance,"onUpdate:modelValue":l[3]||(l[3]=e=>m.form.balance=e),placeholder:"",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(c,{label:"状态",prop:"status"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{label:1,modelValue:m.form.status,"onUpdate:modelValue":l[4]||(l[4]=e=>m.form.status=e)},{default:(0,a.w5)((()=>[o])),_:1},8,["modelValue"]),(0,a.Wm)(p,{label:2,modelValue:m.form.status,"onUpdate:modelValue":l[5]||(l[5]=e=>m.form.status=e)},{default:(0,a.w5)((()=>[i])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules","disabled"])):"add"===m.mode?((0,a.wg)(),(0,a.j4)(h,{key:1,model:m.form,rules:m.addRules,disabled:"show"===m.mode,ref:"addForm","label-width":"100px","label-position":"left"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{label:"手机号",prop:"phone"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{type:"number",modelValue:m.form.phone,"onUpdate:modelValue":l[6]||(l[6]=e=>m.form.phone=e),placeholder:"请输入手机号",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.Wm)(c,{label:"密码",prop:"password"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{modelValue:m.form.password,"onUpdate:modelValue":l[7]||(l[7]=e=>m.form.password=e),placeholder:"请输入密码",clearable:""},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules","disabled"])):(0,a.kq)("",!0)])),_:1},8,["title","modelValue"])}var m={emits:["success","closed"],data(){return{mode:"add",titleMap:{add:"新增会员",edit:"编辑会员",show:"查看"},visible:!1,isSaveing:!1,form:{id:"",nickname:"",avatar:"",phone:"",password:"",integral:0,balance:0,status:1},deleteIcon:"el-icon-delete",editRules:{nickname:[{required:!0,message:"请输入昵称",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"}],integral:[{required:!0,message:"请输入积分",trigger:"blur"}],balance:[{required:!0,message:"请输入余额",trigger:"blur"}]},addRules:{phone:[{required:!0,message:"请输入手机号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},roles:[]}},mounted(){},methods:{open(e="add"){return this.mode=e,this.visible=!0,this},submit(){"edit"===this.mode?this.$refs.editForm.validate((async e=>{if(!e)return!1;var l;this.isSaveing=!0,l=await this.$API.user.edit.post(this.form),this.isSaveing=!1,0===l.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success(l.msg)):this.$message.error(l.msg)})):this.$refs.addForm.validate((async e=>{if(!e)return!1;var l;this.isSaveing=!0,l=await this.$API.user.add.post(this.form),this.isSaveing=!1,0===l.code?(this.$emit("success",this.form,this.mode),this.visible=!1,this.$message.success(l.msg)):this.$message.error(l.msg)}))},setData(e){this.form.id=e.id,this.form.nickname=e.nickname,this.form.avatar=e.avatar,this.form.phone=e.phone,this.form.integral=e.integral,this.form.balance=e.balance,this.form.status=e.status}}},n=t(3744);const u=(0,n.Z)(m,[["render",r],["__scopeId","data-v-3b1b4171"]]);var c=u}}]);